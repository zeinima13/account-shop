{"ast":null,"code":"import _toConsumableArray from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _objectSpread from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { ref, provide, inject, onMounted, unref, onBeforeUnmount } from 'vue';\nimport Collection from './collection2.mjs';\nimport CollectionItem from './collection-item.mjs';\nvar COLLECTION_ITEM_SIGN = \"data-el-collection-item\";\nvar createCollectionWithScope = function createCollectionWithScope(name) {\n  var COLLECTION_NAME = \"El\".concat(name, \"Collection\");\n  var COLLECTION_ITEM_NAME = \"\".concat(COLLECTION_NAME, \"Item\");\n  var COLLECTION_INJECTION_KEY = Symbol(COLLECTION_NAME);\n  var COLLECTION_ITEM_INJECTION_KEY = Symbol(COLLECTION_ITEM_NAME);\n  var ElCollection = _objectSpread(_objectSpread({}, Collection), {}, {\n    name: COLLECTION_NAME,\n    setup: function setup() {\n      var collectionRef = ref(null);\n      var itemMap = /* @__PURE__ */new Map();\n      var getItems = function getItems() {\n        var collectionEl = unref(collectionRef);\n        if (!collectionEl) return [];\n        var orderedNodes = Array.from(collectionEl.querySelectorAll(\"[\".concat(COLLECTION_ITEM_SIGN, \"]\")));\n        var items = _toConsumableArray(itemMap.values());\n        return items.sort(function (a, b) {\n          return orderedNodes.indexOf(a.ref) - orderedNodes.indexOf(b.ref);\n        });\n      };\n      provide(COLLECTION_INJECTION_KEY, {\n        itemMap: itemMap,\n        getItems: getItems,\n        collectionRef: collectionRef\n      });\n    }\n  });\n  var ElCollectionItem = _objectSpread(_objectSpread({}, CollectionItem), {}, {\n    name: COLLECTION_ITEM_NAME,\n    setup: function setup(_, _ref) {\n      var attrs = _ref.attrs;\n      var collectionItemRef = ref(null);\n      var collectionInjection = inject(COLLECTION_INJECTION_KEY, void 0);\n      provide(COLLECTION_ITEM_INJECTION_KEY, {\n        collectionItemRef: collectionItemRef\n      });\n      onMounted(function () {\n        var collectionItemEl = unref(collectionItemRef);\n        if (collectionItemEl) {\n          collectionInjection.itemMap.set(collectionItemEl, _objectSpread({\n            ref: collectionItemEl\n          }, attrs));\n        }\n      });\n      onBeforeUnmount(function () {\n        var collectionItemEl = unref(collectionItemRef);\n        collectionInjection.itemMap[\"delete\"](collectionItemEl);\n      });\n    }\n  });\n  return {\n    COLLECTION_INJECTION_KEY: COLLECTION_INJECTION_KEY,\n    COLLECTION_ITEM_INJECTION_KEY: COLLECTION_ITEM_INJECTION_KEY,\n    ElCollection: ElCollection,\n    ElCollectionItem: ElCollectionItem\n  };\n};\nexport { COLLECTION_ITEM_SIGN, createCollectionWithScope };","map":{"version":3,"names":["COLLECTION_ITEM_SIGN","createCollectionWithScope","name","COLLECTION_NAME","concat","COLLECTION_ITEM_NAME","COLLECTION_INJECTION_KEY","Symbol","COLLECTION_ITEM_INJECTION_KEY","ElCollection","_objectSpread","Collection","setup","collectionRef","ref","itemMap","Map","getItems","collectionEl","unref","orderedNodes","Array","from","querySelectorAll","items","_toConsumableArray","values","sort","a","b","indexOf","provide","ElCollectionItem","CollectionItem","_","_ref","attrs","collectionItemRef","collectionInjection","inject","onMounted","collectionItemEl","set","onBeforeUnmount"],"sources":["../../../../../../packages/components/collection/src/collection.ts"],"sourcesContent":["import { inject, onBeforeUnmount, onMounted, provide, ref, unref } from 'vue'\nimport Collection from './collection.vue'\nimport CollectionItem from './collection-item.vue'\n\nimport type { InjectionKey } from 'vue'\nimport type { SetupContext } from '@vue/runtime-core'\nimport type {\n  ElCollectionInjectionContext,\n  ElCollectionItemInjectionContext,\n} from './tokens'\n\nexport const COLLECTION_ITEM_SIGN = `data-el-collection-item`\n\n// Make sure the first letter of name is capitalized\nexport const createCollectionWithScope = (name: string) => {\n  const COLLECTION_NAME = `El${name}Collection`\n  const COLLECTION_ITEM_NAME = `${COLLECTION_NAME}Item`\n  const COLLECTION_INJECTION_KEY: InjectionKey<ElCollectionInjectionContext> =\n    Symbol(COLLECTION_NAME)\n  const COLLECTION_ITEM_INJECTION_KEY: InjectionKey<ElCollectionItemInjectionContext> =\n    Symbol(COLLECTION_ITEM_NAME)\n\n  const ElCollection = {\n    ...Collection,\n    name: COLLECTION_NAME,\n    setup() {\n      const collectionRef = ref<HTMLElement | null>(null)\n      const itemMap: ElCollectionInjectionContext['itemMap'] = new Map()\n      const getItems = () => {\n        const collectionEl = unref(collectionRef)\n\n        if (!collectionEl) return []\n        const orderedNodes = Array.from(\n          collectionEl.querySelectorAll(`[${COLLECTION_ITEM_SIGN}]`)\n        )\n\n        const items = [...itemMap.values()]\n\n        return items.sort(\n          (a, b) => orderedNodes.indexOf(a.ref!) - orderedNodes.indexOf(b.ref!)\n        )\n      }\n\n      provide(COLLECTION_INJECTION_KEY, {\n        itemMap,\n        getItems,\n        collectionRef,\n      })\n    },\n  }\n\n  const ElCollectionItem = {\n    ...CollectionItem,\n    name: COLLECTION_ITEM_NAME,\n    setup(_: unknown, { attrs }: SetupContext) {\n      const collectionItemRef = ref<HTMLElement | null>(null)\n      const collectionInjection = inject(COLLECTION_INJECTION_KEY, undefined)!\n\n      provide(COLLECTION_ITEM_INJECTION_KEY, {\n        collectionItemRef,\n      })\n\n      onMounted(() => {\n        const collectionItemEl = unref(collectionItemRef)\n        if (collectionItemEl) {\n          collectionInjection.itemMap.set(collectionItemEl, {\n            ref: collectionItemEl,\n            ...attrs,\n          })\n        }\n      })\n\n      onBeforeUnmount(() => {\n        const collectionItemEl = unref(collectionItemRef)!\n        collectionInjection.itemMap.delete(collectionItemEl)\n      })\n    },\n  }\n\n  return {\n    COLLECTION_INJECTION_KEY,\n    COLLECTION_ITEM_INJECTION_KEY,\n    ElCollection,\n    ElCollectionItem,\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAGY,IAACA,oBAAoB,4BAA2B;AAChD,IAACC,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAIC,IAAI,EAAK;EACjD,IAAMC,eAAe,QAAAC,MAAA,CAAQF,IAAI,eAAY;EAC7C,IAAMG,oBAAoB,MAAAD,MAAA,CAAMD,eAAe,SAAM;EACrD,IAAMG,wBAAwB,GAAGC,MAAM,CAACJ,eAAe,CAAC;EACxD,IAAMK,6BAA6B,GAAGD,MAAM,CAACF,oBAAoB,CAAC;EAClE,IAAMI,YAAY,GAAAC,aAAA,CAAAA,aAAA,KACbC,UAAU;IACbT,IAAI,EAAEC,eAAe;IACrBS,KAAK,WAALA,KAAKA,CAAA,EAAG;MACN,IAAMC,aAAa,GAAGC,GAAG,CAAC,IAAI,CAAC;MAC/B,IAAMC,OAAO,kBAAmB,IAAIC,GAAG,EAAE;MACzC,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAA,EAAS;QACrB,IAAMC,YAAY,GAAGC,KAAK,CAACN,aAAa,CAAC;QACzC,IAAI,CAACK,YAAY,EACf,OAAO,EAAE;QACX,IAAME,YAAY,GAAGC,KAAK,CAACC,IAAI,CAACJ,YAAY,CAACK,gBAAgB,KAAAnB,MAAA,CAAKJ,oBAAoB,MAAG,CAAC,CAAC;QAC3F,IAAMwB,KAAK,GAAAC,kBAAA,CAAOV,OAAO,CAACW,MAAM,EAAE,CAAC;QACnC,OAAOF,KAAK,CAACG,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;UAAA,OAAKT,YAAY,CAACU,OAAO,CAACF,CAAC,CAACd,GAAG,CAAC,GAAGM,YAAY,CAACU,OAAO,CAACD,CAAC,CAACf,GAAG,CAAC;QAAA,EAAC;MAC9F,CAAO;MACDiB,OAAO,CAACzB,wBAAwB,EAAE;QAChCS,OAAO,EAAPA,OAAO;QACPE,QAAQ,EAARA,QAAQ;QACRJ,aAAa,EAAbA;MACR,CAAO,CAAC;IACR;EAAK,EACF;EACD,IAAMmB,gBAAgB,GAAAtB,aAAA,CAAAA,aAAA,KACjBuB,cAAc;IACjB/B,IAAI,EAAEG,oBAAoB;IAC1BO,KAAK,WAALA,KAAKA,CAACsB,CAAC,EAAAC,IAAA,EAAa;MAAA,IAATC,KAAK,GAAAD,IAAA,CAALC,KAAK;MACd,IAAMC,iBAAiB,GAAGvB,GAAG,CAAC,IAAI,CAAC;MACnC,IAAMwB,mBAAmB,GAAGC,MAAM,CAACjC,wBAAwB,EAAE,KAAK,CAAC,CAAC;MACpEyB,OAAO,CAACvB,6BAA6B,EAAE;QACrC6B,iBAAiB,EAAjBA;MACR,CAAO,CAAC;MACFG,SAAS,CAAC,YAAM;QACd,IAAMC,gBAAgB,GAAGtB,KAAK,CAACkB,iBAAiB,CAAC;QACjD,IAAII,gBAAgB,EAAE;UACpBH,mBAAmB,CAACvB,OAAO,CAAC2B,GAAG,CAACD,gBAAgB,EAAA/B,aAAA;YAC9CI,GAAG,EAAE2B;UAAgB,GAClBL,KAAK,CACT,CAAC;QACZ;MACA,CAAO,CAAC;MACFO,eAAe,CAAC,YAAM;QACpB,IAAMF,gBAAgB,GAAGtB,KAAK,CAACkB,iBAAiB,CAAC;QACjDC,mBAAmB,CAACvB,OAAO,UAAO,CAAC0B,gBAAgB,CAAC;MAC5D,CAAO,CAAC;IACR;EAAK,EACF;EACD,OAAO;IACLnC,wBAAwB,EAAxBA,wBAAwB;IACxBE,6BAA6B,EAA7BA,6BAA6B;IAC7BC,YAAY,EAAZA,YAAY;IACZuB,gBAAgB,EAAhBA;EACJ,CAAG;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}