{"ast":null,"code":"import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { defineComponent } from 'vue';\nimport { flattedChildren } from '../../../utils/vue/vnode.mjs';\nimport { isArray } from '@vue/shared';\nvar ElTourSteps = defineComponent({\n  name: \"ElTourSteps\",\n  props: {\n    current: {\n      type: Number,\n      \"default\": 0\n    }\n  },\n  emits: [\"update-total\"],\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n      emit = _ref.emit;\n    var cacheTotal = 0;\n    return function () {\n      var _a, _b;\n      var children = (_a = slots[\"default\"]) == null ? void 0 : _a.call(slots);\n      var result = [];\n      var total = 0;\n      function filterSteps(children2) {\n        if (!isArray(children2)) return;\n        children2.forEach(function (item) {\n          var _a2;\n          var name = (_a2 = (item == null ? void 0 : item.type) || {}) == null ? void 0 : _a2.name;\n          if (name === \"ElTourStep\") {\n            result.push(item);\n            total += 1;\n          }\n        });\n      }\n      if (children.length) {\n        filterSteps(flattedChildren((_b = children[0]) == null ? void 0 : _b.children));\n      }\n      if (cacheTotal !== total) {\n        cacheTotal = total;\n        emit(\"update-total\", total);\n      }\n      if (result.length) {\n        return result[props.current];\n      }\n      return null;\n    };\n  }\n});\nexport { ElTourSteps as default };","map":{"version":3,"names":["ElTourSteps","defineComponent","name","props","current","type","Number","emits","setup","_ref","slots","emit","cacheTotal","_a","_b","children","call","result","total","filterSteps","children2","isArray","forEach","item","_a2","push","length","flattedChildren"],"sources":["../../../../../../packages/components/tour/src/steps.ts"],"sourcesContent":["import { defineComponent } from 'vue'\nimport { flattedChildren, isArray } from '@element-plus/utils'\nimport type { FlattenVNodes } from '@element-plus/utils'\nimport type { Component, VNode } from 'vue'\n\nexport default defineComponent({\n  name: 'ElTourSteps',\n  props: {\n    current: {\n      type: Number,\n      default: 0,\n    },\n  },\n  emits: ['update-total'],\n  setup(props, { slots, emit }) {\n    let cacheTotal = 0\n\n    return () => {\n      const children = slots.default?.()!\n      const result: VNode[] = []\n      let total = 0\n\n      function filterSteps(children?: FlattenVNodes) {\n        if (!isArray(children)) return\n        ;(children as VNode[]).forEach((item) => {\n          const name = ((item?.type || {}) as Component)?.name\n\n          if (name === 'ElTourStep') {\n            result.push(item)\n            total += 1\n          }\n        })\n      }\n\n      if (children.length) {\n        filterSteps(flattedChildren(children![0]?.children))\n      }\n\n      if (cacheTotal !== total) {\n        cacheTotal = total\n        emit('update-total', total)\n      }\n\n      if (result.length) {\n        return result[props.current]\n      }\n      return null\n    }\n  },\n})\n"],"mappings":";;;;;;;;;;;AAEA,IAAAA,WAAA,GAAeC,eAAe,CAAC;EAC7BC,IAAI,EAAE,aAAa;EACnBC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZ,WAAS;IACf;EACA,CAAG;EACDC,KAAK,EAAE,CAAC,cAAc,CAAC;EACvBC,KAAK,WAALA,KAAKA,CAACL,KAAK,EAAAM,IAAA,EAAmB;IAAA,IAAfC,KAAK,GAAAD,IAAA,CAALC,KAAK;MAAEC,IAAI,GAAAF,IAAA,CAAJE,IAAI;IACxB,IAAIC,UAAU,GAAG,CAAC;IAClB,OAAO,YAAM;MACX,IAAIC,EAAE,EAAEC,EAAE;MACV,IAAMC,QAAQ,GAAG,CAACF,EAAE,GAAGH,KAAK,WAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGG,EAAE,CAACG,IAAI,CAACN,KAAK,CAAC;MACvE,IAAMO,MAAM,GAAG,EAAE;MACjB,IAAIC,KAAK,GAAG,CAAC;MACb,SAASC,WAAWA,CAACC,SAAS,EAAE;QAC9B,IAAI,CAACC,OAAO,CAACD,SAAS,CAAC,EACrB;QACFA,SAAS,CAACE,OAAO,CAAC,UAACC,IAAI,EAAK;UAC1B,IAAIC,GAAG;UACP,IAAMtB,IAAI,GAAG,CAACsB,GAAG,GAAG,CAACD,IAAI,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,IAAI,CAAClB,IAAI,KAAK,EAAE,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGmB,GAAG,CAACtB,IAAI;UAC1F,IAAIA,IAAI,KAAK,YAAY,EAAE;YACzBe,MAAM,CAACQ,IAAI,CAACF,IAAI,CAAC;YACjBL,KAAK,IAAI,CAAC;UACtB;QACA,CAAS,CAAC;MACV;MACM,IAAIH,QAAQ,CAACW,MAAM,EAAE;QACnBP,WAAW,CAACQ,eAAe,CAAC,CAACb,EAAE,GAAGC,QAAQ,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGD,EAAE,CAACC,QAAQ,CAAC,CAAC;MACvF;MACM,IAAIH,UAAU,KAAKM,KAAK,EAAE;QACxBN,UAAU,GAAGM,KAAK;QAClBP,IAAI,CAAC,cAAc,EAAEO,KAAK,CAAC;MACnC;MACM,IAAID,MAAM,CAACS,MAAM,EAAE;QACjB,OAAOT,MAAM,CAACd,KAAK,CAACC,OAAO,CAAC;MACpC;MACM,OAAO,IAAI;IACjB,CAAK;EACL;AACA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}