{"ast":null,"code":"import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport { ref, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage } from 'element-plus';\nexport default {\n  name: 'Shop',\n  setup: function setup() {\n    var router = useRouter();\n    var form = ref({\n      productType: '',\n      product: '',\n      region: '',\n      gender: 'random'\n    });\n    var quantities = ref([0, 0, 0]);\n    var productTypes = [{\n      value: 'game',\n      label: '游戏账号'\n    }, {\n      value: 'video',\n      label: '视频会员'\n    }, {\n      value: 'music',\n      label: '音乐会员'\n    }];\n    var products = ref([{\n      id: 1,\n      name: 'Steam账号',\n      type: 'game',\n      price: 99\n    }, {\n      id: 2,\n      name: 'Netflix会员',\n      type: 'video',\n      price: 29\n    }, {\n      id: 3,\n      name: 'Spotify会员',\n      type: 'music',\n      price: 19\n    }]);\n    var regions = [{\n      value: 'cn',\n      label: '中国大陆'\n    }, {\n      value: 'hk',\n      label: '香港'\n    }, {\n      value: 'tw',\n      label: '台湾'\n    }];\n    var filteredProducts = computed(function () {\n      if (!form.value.productType) return [];\n      return products.value.filter(function (p) {\n        return p.type === form.value.productType;\n      });\n    });\n    var increaseQuantity = function increaseQuantity(index) {\n      quantities.value[index]++;\n    };\n    var decreaseQuantity = function decreaseQuantity(index) {\n      if (quantities.value[index] > 0) {\n        quantities.value[index]--;\n      }\n    };\n    var submitOrder = function submitOrder() {\n      var selectedProduct = products.value.find(function (p) {\n        return p.id === form.value.product;\n      });\n      if (!selectedProduct) {\n        ElMessage.warning('请选择商品');\n        return;\n      }\n      var totalQuantity = quantities.value.reduce(function (a, b) {\n        return a + b;\n      }, 0);\n      if (totalQuantity === 0) {\n        ElMessage.warning('请选择购买数量');\n        return;\n      }\n      var order = {\n        productId: selectedProduct.id,\n        productName: selectedProduct.name,\n        quantity: totalQuantity,\n        price: selectedProduct.price,\n        total: selectedProduct.price * totalQuantity,\n        region: form.value.region,\n        gender: form.value.gender\n      };\n      router.push({\n        name: 'payment',\n        params: {\n          order: JSON.stringify(order)\n        }\n      });\n    };\n    return {\n      form: form,\n      quantities: quantities,\n      productTypes: productTypes,\n      products: products,\n      regions: regions,\n      filteredProducts: filteredProducts,\n      increaseQuantity: increaseQuantity,\n      decreaseQuantity: decreaseQuantity,\n      submitOrder: submitOrder\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}