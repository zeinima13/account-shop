{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.every.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.number.parse-float.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.every.js\";\nimport { defineComponent, getCurrentInstance, inject, ref, watch, nextTick, onBeforeUnmount, openBlock, createElementBlock, normalizeClass, unref, normalizeStyle } from 'vue';\nimport { useResizeObserver } from '@vueuse/core';\nimport { tabsRootContextKey } from './constants.mjs';\nimport { tabBarProps } from './tab-bar.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { throwError } from '../../../utils/error.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { capitalize } from '../../../utils/strings.mjs';\nvar COMPONENT_NAME = \"ElTabBar\";\nvar __default__ = defineComponent({\n  name: COMPONENT_NAME\n});\nvar _sfc_main = /* @__PURE__ */defineComponent(_objectSpread(_objectSpread({}, __default__), {}, {\n  props: tabBarProps,\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose;\n    var props = __props;\n    var instance = getCurrentInstance();\n    var rootTabs = inject(tabsRootContextKey);\n    if (!rootTabs) throwError(COMPONENT_NAME, \"<el-tabs><el-tab-bar /></el-tabs>\");\n    var ns = useNamespace(\"tabs\");\n    var barRef = ref();\n    var barStyle = ref();\n    var getBarStyle = function getBarStyle() {\n      var offset = 0;\n      var tabSize = 0;\n      var sizeName = [\"top\", \"bottom\"].includes(rootTabs.props.tabPosition) ? \"width\" : \"height\";\n      var sizeDir = sizeName === \"width\" ? \"x\" : \"y\";\n      var position = sizeDir === \"x\" ? \"left\" : \"top\";\n      props.tabs.every(function (tab) {\n        var _a, _b;\n        var $el = (_b = (_a = instance.parent) == null ? void 0 : _a.refs) == null ? void 0 : _b[\"tab-\".concat(tab.uid)];\n        if (!$el) return false;\n        if (!tab.active) {\n          return true;\n        }\n        offset = $el[\"offset\".concat(capitalize(position))];\n        tabSize = $el[\"client\".concat(capitalize(sizeName))];\n        var tabStyles = window.getComputedStyle($el);\n        if (sizeName === \"width\") {\n          tabSize -= Number.parseFloat(tabStyles.paddingLeft) + Number.parseFloat(tabStyles.paddingRight);\n          offset += Number.parseFloat(tabStyles.paddingLeft);\n        }\n        return false;\n      });\n      return _defineProperty(_defineProperty({}, sizeName, \"\".concat(tabSize, \"px\")), \"transform\", \"translate\".concat(capitalize(sizeDir), \"(\").concat(offset, \"px)\"));\n    };\n    var update = function update() {\n      return barStyle.value = getBarStyle();\n    };\n    var saveObserver = [];\n    var observerTabs = function observerTabs() {\n      var _a;\n      saveObserver.forEach(function (observer) {\n        return observer.stop();\n      });\n      saveObserver.length = 0;\n      var list = (_a = instance.parent) == null ? void 0 : _a.refs;\n      if (!list) return;\n      for (var key in list) {\n        if (key.startsWith(\"tab-\")) {\n          var _el = list[key];\n          if (_el) {\n            saveObserver.push(useResizeObserver(_el, update));\n          }\n        }\n      }\n    };\n    watch(function () {\n      return props.tabs;\n    }, /*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return nextTick();\n          case 2:\n            update();\n            observerTabs();\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    })), {\n      immediate: true\n    });\n    var barObserever = useResizeObserver(barRef, function () {\n      return update();\n    });\n    onBeforeUnmount(function () {\n      saveObserver.forEach(function (observer) {\n        return observer.stop();\n      });\n      saveObserver.length = 0;\n      barObserever.stop();\n    });\n    expose({\n      ref: barRef,\n      update: update\n    });\n    return function (_ctx, _cache) {\n      return openBlock(), createElementBlock(\"div\", {\n        ref_key: \"barRef\",\n        ref: barRef,\n        \"class\": normalizeClass([unref(ns).e(\"active-bar\"), unref(ns).is(unref(rootTabs).props.tabPosition)]),\n        style: normalizeStyle(barStyle.value)\n      }, null, 6);\n    };\n  }\n}));\nvar TabBar = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"tab-bar.vue\"]]);\nexport { TabBar as default };","map":{"version":3,"names":["name","COMPONENT_NAME","instance","getCurrentInstance","rootTabs","inject","tabsRootContextKey","throwError","ns","useNamespace","barRef","ref","barStyle","getBarStyle","offset","tabSize","sizeName","includes","props","tabPosition","sizeDir","position","tabs","every","tab","_a","_b","$el","parent","refs","concat","uid","active","capitalize","tabStyles","window","getComputedStyle","Number","parseFloat","paddingLeft","paddingRight","_defineProperty","update","value","saveObserver","observerTabs","forEach","observer","stop","length","list","key","startsWith","_el","push","useResizeObserver","watch","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","nextTick","immediate","barObserever","onBeforeUnmount","expose","_ctx","_cache"],"sources":["../../../../../../packages/components/tabs/src/tab-bar.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"barRef\"\n    :class=\"[ns.e('active-bar'), ns.is(rootTabs!.props.tabPosition)]\"\n    :style=\"barStyle\"\n  />\n</template>\n\n<script lang=\"ts\" setup>\nimport {\n  getCurrentInstance,\n  inject,\n  nextTick,\n  onBeforeUnmount,\n  ref,\n  watch,\n} from 'vue'\nimport { useResizeObserver } from '@vueuse/core'\nimport { capitalize, throwError } from '@element-plus/utils'\nimport { useNamespace } from '@element-plus/hooks'\nimport { tabsRootContextKey } from './constants'\nimport { tabBarProps } from './tab-bar'\n\nimport type { CSSProperties } from 'vue'\n\nconst COMPONENT_NAME = 'ElTabBar'\ndefineOptions({\n  name: COMPONENT_NAME,\n})\nconst props = defineProps(tabBarProps)\n\nconst instance = getCurrentInstance()!\nconst rootTabs = inject(tabsRootContextKey)\nif (!rootTabs) throwError(COMPONENT_NAME, '<el-tabs><el-tab-bar /></el-tabs>')\n\nconst ns = useNamespace('tabs')\n\nconst barRef = ref<HTMLDivElement>()\nconst barStyle = ref<CSSProperties>()\n\nconst getBarStyle = (): CSSProperties => {\n  let offset = 0\n  let tabSize = 0\n\n  const sizeName = ['top', 'bottom'].includes(rootTabs.props.tabPosition)\n    ? 'width'\n    : 'height'\n  const sizeDir = sizeName === 'width' ? 'x' : 'y'\n  const position = sizeDir === 'x' ? 'left' : 'top'\n\n  props.tabs.every((tab) => {\n    const $el = instance.parent?.refs?.[`tab-${tab.uid}`] as HTMLElement\n    if (!$el) return false\n\n    if (!tab.active) {\n      return true\n    }\n\n    offset = $el[`offset${capitalize(position)}`]\n    tabSize = $el[`client${capitalize(sizeName)}`]\n\n    const tabStyles = window.getComputedStyle($el)\n\n    if (sizeName === 'width') {\n      tabSize -=\n        Number.parseFloat(tabStyles.paddingLeft) +\n        Number.parseFloat(tabStyles.paddingRight)\n      offset += Number.parseFloat(tabStyles.paddingLeft)\n    }\n    return false\n  })\n\n  return {\n    [sizeName]: `${tabSize}px`,\n    transform: `translate${capitalize(sizeDir)}(${offset}px)`,\n  }\n}\n\nconst update = () => (barStyle.value = getBarStyle())\n\nconst saveObserver = [] as ReturnType<typeof useResizeObserver>[]\nconst observerTabs = () => {\n  saveObserver.forEach((observer) => observer.stop())\n  saveObserver.length = 0\n  const list = instance.parent?.refs as Record<string, HTMLElement>\n  if (!list) return\n  for (const key in list) {\n    if (key.startsWith('tab-')) {\n      const _el = list[key]\n      if (_el) {\n        saveObserver.push(useResizeObserver(_el, update))\n      }\n    }\n  }\n}\n\nwatch(\n  () => props.tabs,\n  async () => {\n    await nextTick()\n    update()\n\n    observerTabs()\n  },\n  { immediate: true }\n)\nconst barObserever = useResizeObserver(barRef, () => update())\n\nonBeforeUnmount(() => {\n  saveObserver.forEach((observer) => observer.stop())\n  saveObserver.length = 0\n  barObserever.stop()\n})\n\ndefineExpose({\n  /** @description tab root html element */\n  ref: barRef,\n  /** @description method to manually update tab bar style */\n  update,\n})\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;iCA0Bc;EACZA,IAAM,EAAAC;AACR;;;;;;IAGA,IAAMC,QAAA,GAAWC,kBAAmB;IAC9B,IAAAC,QAAA,GAAWC,MAAA,CAAOC,kBAAkB;IAC1C,IAAI,CAACF,QAAA,EAECG,UAAA,CAAAN,cAAwB;IAE9B,IAAMO,EAAA,GAAAC,YAA6B;IACnC,IAAMC,MAAA,GAAAC,GAA8B;IAEpC,IAAMC,QAAA,GAAAD,GAAc,EAAqB;IACvC,IAAIE,WAAS,YAATA,WAASA,CAAA;MACb,IAAIC,MAAU;MAER,IAAAC,OAAA;MAGA,IAAAC,QAAA,GAAuB,kBAAAC,QAAgB,CAAAb,QAAA,CAAAc,KAAA,CAAAC,WAAA;MACvC,IAAAC,OAAA,GAAAJ,QAAuB,YAAe;MAEtC,IAAAK,QAAW,GAAAD,OAAS;MACxBF,KAAA,CAAAI,IAAA,CAAAC,KAAqB,WAAAC,GAAA;QACjB,IAAAC,EAAA,EAAAC,EAAa;QAEb,IAAAC,GAAK,GAAQ,CAAAD,EAAA,IAAAD,EAAA,GAAAvB,QAAA,CAAA0B,MAAA,qBAAAH,EAAA,CAAAI,IAAA,qBAAAH,EAAA,QAAAI,MAAA,CAAAN,GAAA,CAAAO,GAAA;QACR,KAAAJ,GAAA,EACT;QAEA,KAAAH,GAAA,CAASQ,MAAI;UACb,WAAc;QAEd;QAEAlB,MAAA,GAAAa,GAAA,UAAAG,MAAA,CAA0BG,UAAA,CAAAZ,QAAA;QAEtBN,OAAA,GAAAY,GAAA,UAAAG,MAAA,CAAAG,UAA4B,CAAAjB,QAAA;QAEpB,IAAAkB,SAAA,GAAAC,MAAkB,CAAAC,gBAAqB,CAAAT,GAAA;QACnD,IAAAX,QAAA;UACOD,OAAA,IAAAsB,MAAA,CAAAC,UAAA,CAAAJ,SAAA,CAAAK,WAAA,IAAAF,MAAA,CAAAC,UAAA,CAAAJ,SAAA,CAAAM,YAAA;UACR1B,MAAA,IAAAuB,MAAA,CAAAC,UAAA,CAAAJ,SAAA,CAAAK,WAAA;QAED;QACE,OAAC,KAAW;MAAU,EACtB;MACF,OAAAE,eAAA,CAAAA,eAAA,KACFzB,QAAA,KAAAc,MAAA,CAAAf,OAAA,mCAAAe,MAAA,CAE+BG,UAAA,CAAQb,OAAY,QAAAU,MAAA,CAAAhB,MAAA;IAGnD;IACE,IAAA4B,MAAA,GAAa,SAAbA,OAAA;MAAA,OAAqB9B,QAAc,CAAA+B,KAAA,GAAA9B,WAAA,EAAc;IAAA;IACjD,IAAA+B,YAAsB;IAChB,IAAAC,YAAA,YAAAA,aAAA,EAAwB;MAC9B,IAAIpB,EAAO;MACXmB,YAAA,CAAAE,OAAwB,WAAAC,QAAA;QAAA,OAAAA,QAAA,CAAAC,IAAA;MAAA;MAClBJ,YAAe,CAAAK,MAAA;MACX,IAAAC,IAAA,IAAAzB,EAAM,GAAAvB,QAAQ,CAAA0B,MAAA,qBAAAH,EAAA,CAAAI,IAAA;MACpB,KAAAqB,IAAS,EACP;MACF,SAAAC,GAAA,IAAAD,IAAA;QACF,IAAAC,GAAA,CAAAC,UAAA;UACF,IAAAC,GAAA,GAAAH,IAAA,CAAAC,GAAA;UACF,IAAAE,GAAA;YAEAT,YAAA,CAAAU,IAAA,CAAAC,iBAAA,CAAAF,GAAA,EAAAX,MAAA;UAAA;QACc;MAEV;IACA,CAAO;IAEMc,KAAA;MAAA,OAAAtC,KAAA,CAAAI,IAAA;IAAA,gBAAAmC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;MAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACfC,QAAA;UAAA;YACAxB,MAAA;YACFG,YAAA;UAAA;UAAA;YAAA,OAAAkB,QAAA,CAAAf,IAAA;QAAA;MAAA,GAAAY,OAAA;IAAA,CACA;MAAAO,SAAqB;IAAA;IAErB,IAAAC,YAAsB,GAAAb,iBAAA,CAAA7C,MAAA;MAAA,OAAAgC,MAAA;IAAA;IACpB2B,eAAa,CAAQ;MACrBzB,YAAA,CAAaE,OAAS,WAAAC,QAAA;QAAA,OAAAA,QAAA,CAAAC,IAAA;MAAA;MACtBJ,YAAA,CAAaK,MAAK;MACnBmB,YAAA,CAAApB,IAAA;IAED,CAAa;IAAAsB,MAAA;MAEX3D,GAAK,EAAAD,MAAA;MAAAgC,MAAA,EAAAA;IAAA,CAEL;IACF,OAAC,UAAA6B,IAAA,EAAAC,MAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}