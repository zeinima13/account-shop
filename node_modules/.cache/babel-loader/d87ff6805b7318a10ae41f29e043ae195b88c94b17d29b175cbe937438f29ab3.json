{"ast":null,"code":"import _objectSpread from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _regeneratorRuntime from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { unref, ref, onMounted, watchEffect, isRef } from 'vue';\nimport { isClient, unrefElement } from '@vueuse/core';\nimport { isNil } from 'lodash-unified';\nimport { arrow, computePosition } from '@floating-ui/dom';\nimport { keysOf } from '../../utils/objects.mjs';\nimport { buildProps } from '../../utils/vue/props/runtime.mjs';\nvar useFloatingProps = buildProps({});\nvar unrefReference = function unrefReference(elRef) {\n  if (!isClient) return;\n  if (!elRef) return elRef;\n  var unrefEl = unrefElement(elRef);\n  if (unrefEl) return unrefEl;\n  return isRef(elRef) ? unrefEl : elRef;\n};\nvar getPositionDataWithUnit = function getPositionDataWithUnit(record, key) {\n  var value = record == null ? void 0 : record[key];\n  return isNil(value) ? \"\" : \"\".concat(value, \"px\");\n};\nvar useFloating = function useFloating(_ref) {\n  var middleware = _ref.middleware,\n    placement = _ref.placement,\n    strategy = _ref.strategy;\n  var referenceRef = ref();\n  var contentRef = ref();\n  var x = ref();\n  var y = ref();\n  var middlewareData = ref({});\n  var states = {\n    x: x,\n    y: y,\n    placement: placement,\n    strategy: strategy,\n    middlewareData: middlewareData\n  };\n  var update = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var referenceEl, contentEl, data;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (isClient) {\n              _context.next = 2;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 2:\n            referenceEl = unrefReference(referenceRef);\n            contentEl = unrefElement(contentRef);\n            if (!(!referenceEl || !contentEl)) {\n              _context.next = 6;\n              break;\n            }\n            return _context.abrupt(\"return\");\n          case 6:\n            _context.next = 8;\n            return computePosition(referenceEl, contentEl, {\n              placement: unref(placement),\n              strategy: unref(strategy),\n              middleware: unref(middleware)\n            });\n          case 8:\n            data = _context.sent;\n            keysOf(states).forEach(function (key) {\n              states[key].value = data[key];\n            });\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function update() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  onMounted(function () {\n    watchEffect(function () {\n      update();\n    });\n  });\n  return _objectSpread(_objectSpread({}, states), {}, {\n    update: update,\n    referenceRef: referenceRef,\n    contentRef: contentRef\n  });\n};\nvar arrowMiddleware = function arrowMiddleware(_ref3) {\n  var arrowRef = _ref3.arrowRef,\n    padding = _ref3.padding;\n  return {\n    name: \"arrow\",\n    options: {\n      element: arrowRef,\n      padding: padding\n    },\n    fn: function fn(args) {\n      var arrowEl = unref(arrowRef);\n      if (!arrowEl) return {};\n      return arrow({\n        element: arrowEl,\n        padding: padding\n      }).fn(args);\n    }\n  };\n};\nexport { arrowMiddleware, getPositionDataWithUnit, useFloating, useFloatingProps };","map":{"version":3,"names":["useFloatingProps","buildProps","unrefReference","elRef","isClient","unrefEl","unrefElement","isRef","getPositionDataWithUnit","record","key","value","isNil","concat","useFloating","_ref","middleware","placement","strategy","referenceRef","ref","contentRef","x","y","middlewareData","states","update","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","referenceEl","contentEl","data","wrap","_callee$","_context","prev","next","abrupt","computePosition","unref","sent","keysOf","forEach","stop","apply","arguments","onMounted","watchEffect","_objectSpread","arrowMiddleware","_ref3","arrowRef","padding","name","options","element","fn","args","arrowEl","arrow"],"sources":["../../../../../packages/hooks/use-floating/index.ts"],"sourcesContent":["import { isRef, onMounted, ref, unref, watchEffect } from 'vue'\nimport { unrefElement } from '@vueuse/core'\nimport { isNil } from 'lodash-unified'\nimport { arrow as arrowCore, computePosition } from '@floating-ui/dom'\nimport { buildProps, isClient, keysOf } from '@element-plus/utils'\n\nimport type { Ref, ToRefs } from 'vue'\nimport type {\n  ComputePositionReturn,\n  Middleware,\n  Placement,\n  SideObject,\n  Strategy,\n  VirtualElement,\n} from '@floating-ui/dom'\n\nexport const useFloatingProps = buildProps({} as const)\n\nexport type UseFloatingProps = ToRefs<{\n  middleware: Array<Middleware>\n  placement: Placement\n  strategy: Strategy\n}>\n\ntype ElementRef = Parameters<typeof unrefElement>['0']\n\nconst unrefReference = (\n  elRef: ElementRef | Ref<VirtualElement | undefined>\n) => {\n  if (!isClient) return\n  if (!elRef) return elRef\n  const unrefEl = unrefElement(elRef as ElementRef)\n  if (unrefEl) return unrefEl\n  return isRef(elRef) ? unrefEl : (elRef as VirtualElement)\n}\n\nexport const getPositionDataWithUnit = <T extends Record<string, number>>(\n  record: T | undefined,\n  key: keyof T\n) => {\n  const value = record?.[key]\n  return isNil(value) ? '' : `${value}px`\n}\n\nexport const useFloating = ({\n  middleware,\n  placement,\n  strategy,\n}: UseFloatingProps) => {\n  const referenceRef = ref<HTMLElement | VirtualElement>()\n  const contentRef = ref<HTMLElement>()\n  const x = ref<number>()\n  const y = ref<number>()\n  const middlewareData = ref<ComputePositionReturn['middlewareData']>({})\n\n  const states = {\n    x,\n    y,\n    placement,\n    strategy,\n    middlewareData,\n  } as const\n\n  const update = async () => {\n    if (!isClient) return\n\n    const referenceEl = unrefReference(referenceRef)\n    const contentEl = unrefElement(contentRef)\n    if (!referenceEl || !contentEl) return\n\n    const data = await computePosition(referenceEl, contentEl, {\n      placement: unref(placement),\n      strategy: unref(strategy),\n      middleware: unref(middleware),\n    })\n\n    keysOf(states).forEach((key) => {\n      states[key].value = data[key]\n    })\n  }\n\n  onMounted(() => {\n    watchEffect(() => {\n      update()\n    })\n  })\n\n  return {\n    ...states,\n    update,\n    referenceRef,\n    contentRef,\n  }\n}\n\nexport type ArrowMiddlewareProps = {\n  arrowRef: Ref<HTMLElement | null | undefined>\n  padding?: number | SideObject\n}\n\nexport const arrowMiddleware = ({\n  arrowRef,\n  padding,\n}: ArrowMiddlewareProps): Middleware => {\n  return {\n    name: 'arrow',\n    options: {\n      element: arrowRef,\n      padding,\n    },\n\n    fn(args) {\n      const arrowEl = unref(arrowRef)\n      if (!arrowEl) return {}\n\n      return arrowCore({\n        element: arrowEl,\n        padding,\n      }).fn(args)\n    },\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}