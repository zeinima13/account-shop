{"ast":null,"code":"import \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.some.js\";\nimport { defineComponent, computed, unref, reactive, toRefs, getCurrentInstance, onBeforeUnmount, nextTick, withDirectives, openBlock, createElementBlock, normalizeClass, withModifiers, renderSlot, createElementVNode, toDisplayString, vShow } from 'vue';\nimport { useOption } from './useOption.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useId } from '../../../hooks/use-id/index.mjs';\nvar _sfc_main = defineComponent({\n  name: \"ElOption\",\n  componentName: \"ElOption\",\n  props: {\n    value: {\n      required: true,\n      type: [String, Number, Boolean, Object]\n    },\n    label: [String, Number],\n    created: Boolean,\n    disabled: Boolean\n  },\n  setup: function setup(props) {\n    var ns = useNamespace(\"select\");\n    var id = useId();\n    var containerKls = computed(function () {\n      return [ns.be(\"dropdown\", \"item\"), ns.is(\"disabled\", unref(isDisabled)), ns.is(\"selected\", unref(itemSelected)), ns.is(\"hovering\", unref(hover))];\n    });\n    var states = reactive({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false\n    });\n    var _useOption = useOption(props, states),\n      currentLabel = _useOption.currentLabel,\n      itemSelected = _useOption.itemSelected,\n      isDisabled = _useOption.isDisabled,\n      select = _useOption.select,\n      hoverItem = _useOption.hoverItem,\n      updateOption = _useOption.updateOption;\n    var _toRefs = toRefs(states),\n      visible = _toRefs.visible,\n      hover = _toRefs.hover;\n    var vm = getCurrentInstance().proxy;\n    select.onOptionCreate(vm);\n    onBeforeUnmount(function () {\n      var key = vm.value;\n      var selectedOptions = select.states.selected;\n      var doesSelected = selectedOptions.some(function (item) {\n        return item.value === vm.value;\n      });\n      nextTick(function () {\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions[\"delete\"](key);\n        }\n      });\n      select.onOptionDestroy(key, vm);\n    });\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm);\n      }\n    }\n    return {\n      ns: ns,\n      id: id,\n      containerKls: containerKls,\n      currentLabel: currentLabel,\n      itemSelected: itemSelected,\n      isDisabled: isDisabled,\n      select: select,\n      hoverItem: hoverItem,\n      updateOption: updateOption,\n      visible: visible,\n      hover: hover,\n      selectOptionClick: selectOptionClick,\n      states: states\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return withDirectives((openBlock(), createElementBlock(\"li\", {\n    id: _ctx.id,\n    \"class\": normalizeClass(_ctx.containerKls),\n    role: \"option\",\n    \"aria-disabled\": _ctx.isDisabled || void 0,\n    \"aria-selected\": _ctx.itemSelected,\n    onMousemove: _ctx.hoverItem,\n    onClick: withModifiers(_ctx.selectOptionClick, [\"stop\"])\n  }, [renderSlot(_ctx.$slots, \"default\", {}, function () {\n    return [createElementVNode(\"span\", null, toDisplayString(_ctx.currentLabel), 1)];\n  })], 42, [\"id\", \"aria-disabled\", \"aria-selected\", \"onMousemove\", \"onClick\"])), [[vShow, _ctx.visible]]);\n}\nvar Option = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render], [\"__file\", \"option.vue\"]]);\nexport { Option as default };","map":{"version":3,"names":["_sfc_main","defineComponent","name","componentName","props","value","required","type","String","Number","Boolean","Object","label","created","disabled","setup","ns","useNamespace","id","useId","containerKls","computed","be","is","unref","isDisabled","itemSelected","hover","states","reactive","index","groupDisabled","visible","_useOption","useOption","currentLabel","select","hoverItem","updateOption","_toRefs","toRefs","vm","getCurrentInstance","proxy","onOptionCreate","onBeforeUnmount","key","selectedOptions","selected","doesSelected","some","item","nextTick","cachedOptions","get","onOptionDestroy","selectOptionClick","handleOptionSelect","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","withDirectives","openBlock","createElementBlock","normalizeClass","role","onMousemove","createElementVNode","toDisplayString","vShow","Option","_export_sfc"],"sources":["../../../../../../packages/components/select/src/option.vue"],"sourcesContent":["<template>\n  <li\n    v-show=\"visible\"\n    :id=\"id\"\n    :class=\"containerKls\"\n    role=\"option\"\n    :aria-disabled=\"isDisabled || undefined\"\n    :aria-selected=\"itemSelected\"\n    @mousemove=\"hoverItem\"\n    @click.stop=\"selectOptionClick\"\n  >\n    <slot>\n      <span>{{ currentLabel }}</span>\n    </slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\n// @ts-nocheck\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  nextTick,\n  onBeforeUnmount,\n  reactive,\n  toRefs,\n  unref,\n} from 'vue'\nimport { useId, useNamespace } from '@element-plus/hooks'\nimport { useOption } from './useOption'\nimport type { SelectOptionProxy } from './token'\n\nexport default defineComponent({\n  name: 'ElOption',\n  componentName: 'ElOption',\n\n  props: {\n    /**\n     * @description value of option\n     */\n    value: {\n      required: true,\n      type: [String, Number, Boolean, Object],\n    },\n    /**\n     * @description label of option, same as `value` if omitted\n     */\n    label: [String, Number],\n    created: Boolean,\n    /**\n     * @description whether option is disabled\n     */\n    disabled: Boolean,\n  },\n\n  setup(props) {\n    const ns = useNamespace('select')\n    const id = useId()\n\n    const containerKls = computed(() => [\n      ns.be('dropdown', 'item'),\n      ns.is('disabled', unref(isDisabled)),\n      ns.is('selected', unref(itemSelected)),\n      ns.is('hovering', unref(hover)),\n    ])\n\n    const states = reactive({\n      index: -1,\n      groupDisabled: false,\n      visible: true,\n      hover: false,\n    })\n\n    const {\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption,\n    } = useOption(props, states)\n\n    const { visible, hover } = toRefs(states)\n\n    const vm = getCurrentInstance().proxy as unknown as SelectOptionProxy\n\n    select.onOptionCreate(vm)\n\n    onBeforeUnmount(() => {\n      const key = vm.value\n      const { selected: selectedOptions } = select.states\n      const doesSelected = selectedOptions.some((item) => {\n        return item.value === vm.value\n      })\n      // if option is not selected, remove it from cache\n      nextTick(() => {\n        if (select.states.cachedOptions.get(key) === vm && !doesSelected) {\n          select.states.cachedOptions.delete(key)\n        }\n      })\n      select.onOptionDestroy(key, vm)\n    })\n\n    function selectOptionClick() {\n      if (!isDisabled.value) {\n        select.handleOptionSelect(vm)\n      }\n    }\n\n    return {\n      ns,\n      id,\n      containerKls,\n      currentLabel,\n      itemSelected,\n      isDisabled,\n      select,\n      hoverItem,\n      updateOption,\n      visible,\n      hover,\n      selectOptionClick,\n      states,\n    }\n  },\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}