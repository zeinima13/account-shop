{"ast":null,"code":"import { cAF, rAF } from '../../../../utils/raf.mjs';\nvar useGridWheel = function useGridWheel(_ref, onWheelDelta) {\n  var atXEndEdge = _ref.atXEndEdge,\n    atXStartEdge = _ref.atXStartEdge,\n    atYEndEdge = _ref.atYEndEdge,\n    atYStartEdge = _ref.atYStartEdge;\n  var frameHandle = null;\n  var xOffset = 0;\n  var yOffset = 0;\n  var hasReachedEdge = function hasReachedEdge(x, y) {\n    var xEdgeReached = x <= 0 && atXStartEdge.value || x >= 0 && atXEndEdge.value;\n    var yEdgeReached = y <= 0 && atYStartEdge.value || y >= 0 && atYEndEdge.value;\n    return xEdgeReached && yEdgeReached;\n  };\n  var onWheel = function onWheel(e) {\n    cAF(frameHandle);\n    var x = e.deltaX;\n    var y = e.deltaY;\n    if (Math.abs(x) > Math.abs(y)) {\n      y = 0;\n    } else {\n      x = 0;\n    }\n    if (e.shiftKey && y !== 0) {\n      x = y;\n      y = 0;\n    }\n    if (hasReachedEdge(xOffset, yOffset) && hasReachedEdge(xOffset + x, yOffset + y)) return;\n    xOffset += x;\n    yOffset += y;\n    e.preventDefault();\n    frameHandle = rAF(function () {\n      onWheelDelta(xOffset, yOffset);\n      xOffset = 0;\n      yOffset = 0;\n    });\n  };\n  return {\n    hasReachedEdge: hasReachedEdge,\n    onWheel: onWheel\n  };\n};\nexport { useGridWheel };","map":{"version":3,"names":["useGridWheel","_ref","onWheelDelta","atXEndEdge","atXStartEdge","atYEndEdge","atYStartEdge","frameHandle","xOffset","yOffset","hasReachedEdge","x","y","xEdgeReached","value","yEdgeReached","onWheel","e","cAF","deltaX","deltaY","Math","abs","shiftKey","preventDefault","rAF"],"sources":["../../../../../../../packages/components/virtual-list/src/hooks/use-grid-wheel.ts"],"sourcesContent":["import { cAF, rAF } from '@element-plus/utils'\n\nimport type { ComputedRef } from 'vue'\n\ninterface GridWheelState {\n  atXStartEdge: ComputedRef<boolean>\n  atXEndEdge: ComputedRef<boolean>\n  atYStartEdge: ComputedRef<boolean>\n  atYEndEdge: ComputedRef<boolean>\n}\n\ntype GridWheelHandler = (x: number, y: number) => void\n\nexport const useGridWheel = (\n  { atXEndEdge, atXStartEdge, atYEndEdge, atYStartEdge }: GridWheelState,\n  onWheelDelta: GridWheelHandler\n) => {\n  let frameHandle: number | null = null\n  let xOffset = 0\n  let yOffset = 0\n\n  const hasReachedEdge = (x: number, y: number) => {\n    const xEdgeReached =\n      (x <= 0 && atXStartEdge.value) || (x >= 0 && atXEndEdge.value)\n    const yEdgeReached =\n      (y <= 0 && atYStartEdge.value) || (y >= 0 && atYEndEdge.value)\n    return xEdgeReached && yEdgeReached\n  }\n\n  const onWheel = (e: WheelEvent) => {\n    cAF(frameHandle!)\n\n    let x = e.deltaX\n    let y = e.deltaY\n    // Simulate native behavior when using touch pad/track pad for wheeling.\n    if (Math.abs(x) > Math.abs(y)) {\n      y = 0\n    } else {\n      x = 0\n    }\n\n    // Special case for windows machine with shift key + wheel scrolling\n    if (e.shiftKey && y !== 0) {\n      x = y\n      y = 0\n    }\n\n    if (\n      hasReachedEdge(xOffset, yOffset) &&\n      hasReachedEdge(xOffset + x, yOffset + y)\n    )\n      return\n\n    xOffset += x\n    yOffset += y\n\n    e.preventDefault()\n\n    frameHandle = rAF(() => {\n      onWheelDelta(xOffset, yOffset)\n      xOffset = 0\n      yOffset = 0\n    })\n  }\n\n  return {\n    hasReachedEdge,\n    onWheel,\n  }\n}\n"],"mappings":";AACY,IAACA,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAA4DC,YAAY,EAAK;EAAA,IAAvEC,UAAU,GAAAF,IAAA,CAAVE,UAAU;IAAEC,YAAY,GAAAH,IAAA,CAAZG,YAAY;IAAEC,UAAU,GAAAJ,IAAA,CAAVI,UAAU;IAAEC,YAAY,GAAAL,IAAA,CAAZK,YAAY;EAC/E,IAAIC,WAAW,GAAG,IAAI;EACtB,IAAIC,OAAO,GAAG,CAAC;EACf,IAAIC,OAAO,GAAG,CAAC;EACf,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,CAAC,EAAEC,CAAC,EAAK;IAC/B,IAAMC,YAAY,GAAGF,CAAC,IAAI,CAAC,IAAIP,YAAY,CAACU,KAAK,IAAIH,CAAC,IAAI,CAAC,IAAIR,UAAU,CAACW,KAAK;IAC/E,IAAMC,YAAY,GAAGH,CAAC,IAAI,CAAC,IAAIN,YAAY,CAACQ,KAAK,IAAIF,CAAC,IAAI,CAAC,IAAIP,UAAU,CAACS,KAAK;IAC/E,OAAOD,YAAY,IAAIE,YAAY;EACvC,CAAG;EACD,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAIC,CAAC,EAAK;IACrBC,GAAG,CAACX,WAAW,CAAC;IAChB,IAAII,CAAC,GAAGM,CAAC,CAACE,MAAM;IAChB,IAAIP,CAAC,GAAGK,CAAC,CAACG,MAAM;IAChB,IAAIC,IAAI,CAACC,GAAG,CAACX,CAAC,CAAC,GAAGU,IAAI,CAACC,GAAG,CAACV,CAAC,CAAC,EAAE;MAC7BA,CAAC,GAAG,CAAC;IACX,CAAK,MAAM;MACLD,CAAC,GAAG,CAAC;IACX;IACI,IAAIM,CAAC,CAACM,QAAQ,IAAIX,CAAC,KAAK,CAAC,EAAE;MACzBD,CAAC,GAAGC,CAAC;MACLA,CAAC,GAAG,CAAC;IACX;IACI,IAAIF,cAAc,CAACF,OAAO,EAAEC,OAAO,CAAC,IAAIC,cAAc,CAACF,OAAO,GAAGG,CAAC,EAAEF,OAAO,GAAGG,CAAC,CAAC,EAC9E;IACFJ,OAAO,IAAIG,CAAC;IACZF,OAAO,IAAIG,CAAC;IACZK,CAAC,CAACO,cAAc,EAAE;IAClBjB,WAAW,GAAGkB,GAAG,CAAC,YAAM;MACtBvB,YAAY,CAACM,OAAO,EAAEC,OAAO,CAAC;MAC9BD,OAAO,GAAG,CAAC;MACXC,OAAO,GAAG,CAAC;IACjB,CAAK,CAAC;EACN,CAAG;EACD,OAAO;IACLC,cAAc,EAAdA,cAAc;IACdM,OAAO,EAAPA;EACJ,CAAG;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}