{"ast":null,"code":"import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { defineComponent, inject } from 'vue';\nimport { isEqual } from 'lodash-unified';\nimport { selectKey } from './token.mjs';\nimport { isArray, isString, isFunction } from '@vue/shared';\nvar ElOptions = defineComponent({\n  name: \"ElOptions\",\n  setup: function setup(_, _ref) {\n    var slots = _ref.slots;\n    var select = inject(selectKey);\n    var cachedValueList = [];\n    return function () {\n      var _a, _b;\n      var children = (_a = slots[\"default\"]) == null ? void 0 : _a.call(slots);\n      var valueList = [];\n      function filterOptions(children2) {\n        if (!isArray(children2)) return;\n        children2.forEach(function (item) {\n          var _a2, _b2, _c, _d;\n          var name = (_a2 = (item == null ? void 0 : item.type) || {}) == null ? void 0 : _a2.name;\n          if (name === \"ElOptionGroup\") {\n            filterOptions(!isString(item.children) && !isArray(item.children) && isFunction((_b2 = item.children) == null ? void 0 : _b2[\"default\"]) ? (_c = item.children) == null ? void 0 : _c[\"default\"]() : item.children);\n          } else if (name === \"ElOption\") {\n            valueList.push((_d = item.props) == null ? void 0 : _d.value);\n          } else if (isArray(item.children)) {\n            filterOptions(item.children);\n          }\n        });\n      }\n      if (children.length) {\n        filterOptions((_b = children[0]) == null ? void 0 : _b.children);\n      }\n      if (!isEqual(valueList, cachedValueList)) {\n        cachedValueList = valueList;\n        if (select) {\n          select.states.optionValues = valueList;\n        }\n      }\n      return children;\n    };\n  }\n});\nexport { ElOptions as default };","map":{"version":3,"names":["ElOptions","defineComponent","name","setup","_","_ref","slots","select","inject","selectKey","cachedValueList","_a","_b","children","call","valueList","filterOptions","children2","isArray","forEach","item","_a2","_b2","_c","_d","type","isString","isFunction","push","props","value","length","isEqual","states","optionValues"],"sources":["../../../../../../packages/components/select/src/options.ts"],"sourcesContent":["import { defineComponent, inject } from 'vue'\nimport { isEqual } from 'lodash-unified'\nimport { isArray, isFunction, isString } from '@element-plus/utils'\nimport { selectKey } from './token'\nimport type { Component, VNode, VNodeNormalizedChildren } from 'vue'\n\nexport default defineComponent({\n  name: 'ElOptions',\n  setup(_, { slots }) {\n    const select = inject(selectKey)\n    let cachedValueList: any[] = []\n\n    return () => {\n      const children = slots.default?.()!\n      const valueList: any[] = []\n\n      function filterOptions(children?: VNodeNormalizedChildren) {\n        if (!isArray(children)) return\n        ;(children as VNode[]).forEach((item) => {\n          const name = ((item?.type || {}) as Component)?.name\n\n          if (name === 'ElOptionGroup') {\n            filterOptions(\n              !isString(item.children) &&\n                !isArray(item.children) &&\n                isFunction(item.children?.default)\n                ? item.children?.default()\n                : item.children\n            )\n          } else if (name === 'ElOption') {\n            valueList.push(item.props?.value)\n          } else if (isArray(item.children)) {\n            filterOptions(item.children)\n          }\n        })\n      }\n\n      if (children.length) {\n        filterOptions(children[0]?.children)\n      }\n\n      if (!isEqual(valueList, cachedValueList)) {\n        cachedValueList = valueList\n        if (select) {\n          select.states.optionValues = valueList\n        }\n      }\n\n      return children\n    }\n  },\n})\n"],"mappings":";;;;;;;;;;;AAIA,IAAAA,SAAA,GAAeC,eAAe,CAAC;EAC7BC,IAAI,EAAE,WAAW;EACjBC,KAAK,WAALA,KAAKA,CAACC,CAAC,EAAAC,IAAA,EAAa;IAAA,IAATC,KAAK,GAAAD,IAAA,CAALC,KAAK;IACd,IAAMC,MAAM,GAAGC,MAAM,CAACC,SAAS,CAAC;IAChC,IAAIC,eAAe,GAAG,EAAE;IACxB,OAAO,YAAM;MACX,IAAIC,EAAE,EAAEC,EAAE;MACV,IAAMC,QAAQ,GAAG,CAACF,EAAE,GAAGL,KAAK,WAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGK,EAAE,CAACG,IAAI,CAACR,KAAK,CAAC;MACvE,IAAMS,SAAS,GAAG,EAAE;MACpB,SAASC,aAAaA,CAACC,SAAS,EAAE;QAChC,IAAI,CAACC,OAAO,CAACD,SAAS,CAAC,EACrB;QACFA,SAAS,CAACE,OAAO,CAAC,UAACC,IAAI,EAAK;UAC1B,IAAIC,GAAG,EAAEC,GAAG,EAAEC,EAAE,EAAEC,EAAE;UACpB,IAAMtB,IAAI,GAAG,CAACmB,GAAG,GAAG,CAACD,IAAI,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,IAAI,CAACK,IAAI,KAAK,EAAE,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGJ,GAAG,CAACnB,IAAI;UAC1F,IAAIA,IAAI,KAAK,eAAe,EAAE;YAC5Bc,aAAa,CAAC,CAACU,QAAQ,CAACN,IAAI,CAACP,QAAQ,CAAC,IAAI,CAACK,OAAO,CAACE,IAAI,CAACP,QAAQ,CAAC,IAAIc,UAAU,CAAC,CAACL,GAAG,GAAGF,IAAI,CAACP,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGS,GAAG,WAAQ,CAAC,GAAG,CAACC,EAAE,GAAGH,IAAI,CAACP,QAAQ,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGU,EAAE,WAAQ,EAAE,GAAGH,IAAI,CAACP,QAAQ,CAAC;UACzN,CAAW,MAAM,IAAIX,IAAI,KAAK,UAAU,EAAE;YAC9Ba,SAAS,CAACa,IAAI,CAAC,CAACJ,EAAE,GAAGJ,IAAI,CAACS,KAAK,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGL,EAAE,CAACM,KAAK,CAAC;UACzE,CAAW,MAAM,IAAIZ,OAAO,CAACE,IAAI,CAACP,QAAQ,CAAC,EAAE;YACjCG,aAAa,CAACI,IAAI,CAACP,QAAQ,CAAC;UACxC;QACA,CAAS,CAAC;MACV;MACM,IAAIA,QAAQ,CAACkB,MAAM,EAAE;QACnBf,aAAa,CAAC,CAACJ,EAAE,GAAGC,QAAQ,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGD,EAAE,CAACC,QAAQ,CAAC;MACxE;MACM,IAAI,CAACmB,OAAO,CAACjB,SAAS,EAAEL,eAAe,CAAC,EAAE;QACxCA,eAAe,GAAGK,SAAS;QAC3B,IAAIR,MAAM,EAAE;UACVA,MAAM,CAAC0B,MAAM,CAACC,YAAY,GAAGnB,SAAS;QAChD;MACA;MACM,OAAOF,QAAQ;IACrB,CAAK;EACL;AACA,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}