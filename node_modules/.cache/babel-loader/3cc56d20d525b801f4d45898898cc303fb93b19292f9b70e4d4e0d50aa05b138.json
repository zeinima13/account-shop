{"ast":null,"code":"import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport { shallowRef, isVNode } from 'vue';\nimport { flattedChildren } from '../../utils/vue/vnode.mjs';\nvar getOrderedChildren = function getOrderedChildren(vm, childComponentName, children) {\n  var nodes = flattedChildren(vm.subTree).filter(function (n) {\n    var _a;\n    return isVNode(n) && ((_a = n.type) == null ? void 0 : _a.name) === childComponentName && !!n.component;\n  });\n  var uids = nodes.map(function (n) {\n    return n.component.uid;\n  });\n  return uids.map(function (uid) {\n    return children[uid];\n  }).filter(function (p) {\n    return !!p;\n  });\n};\nvar useOrderedChildren = function useOrderedChildren(vm, childComponentName) {\n  var children = {};\n  var orderedChildren = shallowRef([]);\n  var addChild = function addChild(child) {\n    children[child.uid] = child;\n    orderedChildren.value = getOrderedChildren(vm, childComponentName, children);\n  };\n  var removeChild = function removeChild(uid) {\n    delete children[uid];\n    orderedChildren.value = orderedChildren.value.filter(function (children2) {\n      return children2.uid !== uid;\n    });\n  };\n  return {\n    children: orderedChildren,\n    addChild: addChild,\n    removeChild: removeChild\n  };\n};\nexport { useOrderedChildren };","map":{"version":3,"names":["getOrderedChildren","vm","childComponentName","children","nodes","flattedChildren","subTree","filter","n","_a","isVNode","type","name","component","uids","map","uid","p","useOrderedChildren","orderedChildren","shallowRef","addChild","child","value","removeChild","children2"],"sources":["../../../../../packages/hooks/use-ordered-children/index.ts"],"sourcesContent":["import { isVNode, shallowRef } from 'vue'\nimport { flattedChildren } from '@element-plus/utils'\n\nimport type { ComponentInternalInstance, VNode } from 'vue'\n\nconst getOrderedChildren = <T>(\n  vm: ComponentInternalInstance,\n  childComponentName: string,\n  children: Record<number, T>\n): T[] => {\n  const nodes = flattedChildren(vm.subTree).filter(\n    (n): n is VNode =>\n      isVNode(n) &&\n      (n.type as any)?.name === childComponentName &&\n      !!n.component\n  )\n  const uids = nodes.map((n) => n.component!.uid)\n  return uids.map((uid) => children[uid]).filter((p) => !!p)\n}\n\nexport const useOrderedChildren = <T extends { uid: number }>(\n  vm: ComponentInternalInstance,\n  childComponentName: string\n) => {\n  const children: Record<number, T> = {}\n  const orderedChildren = shallowRef<T[]>([])\n\n  // TODO: split into two functions: addChild and sortChildren\n  const addChild = (child: T) => {\n    children[child.uid] = child\n    orderedChildren.value = getOrderedChildren(vm, childComponentName, children)\n  }\n  const removeChild = (uid: number) => {\n    delete children[uid]\n    orderedChildren.value = orderedChildren.value.filter(\n      (children) => children.uid !== uid\n    )\n  }\n\n  return {\n    children: orderedChildren,\n    addChild,\n    removeChild,\n  }\n}\n"],"mappings":";;;;;;;;;AAEA,IAAMA,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIC,EAAE,EAAEC,kBAAkB,EAAEC,QAAQ,EAAK;EAC/D,IAAMC,KAAK,GAAGC,eAAe,CAACJ,EAAE,CAACK,OAAO,CAAC,CAACC,MAAM,CAAC,UAACC,CAAC,EAAK;IACtD,IAAIC,EAAE;IACN,OAAOC,OAAO,CAACF,CAAC,CAAC,IAAI,CAAC,CAACC,EAAE,GAAGD,CAAC,CAACG,IAAI,KAAK,IAAI,GAAG,KAAK,CAAC,GAAGF,EAAE,CAACG,IAAI,MAAMV,kBAAkB,IAAI,CAAC,CAACM,CAAC,CAACK,SAAS;EAC3G,CAAG,CAAC;EACF,IAAMC,IAAI,GAAGV,KAAK,CAACW,GAAG,CAAC,UAACP,CAAC;IAAA,OAAKA,CAAC,CAACK,SAAS,CAACG,GAAG;EAAA,EAAC;EAC9C,OAAOF,IAAI,CAACC,GAAG,CAAC,UAACC,GAAG;IAAA,OAAKb,QAAQ,CAACa,GAAG,CAAC;EAAA,EAAC,CAACT,MAAM,CAAC,UAACU,CAAC;IAAA,OAAK,CAAC,CAACA,CAAC;EAAA,EAAC;AAC5D,CAAC;AACW,IAACC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAIjB,EAAE,EAAEC,kBAAkB,EAAK;EAC5D,IAAMC,QAAQ,GAAG,EAAE;EACnB,IAAMgB,eAAe,GAAGC,UAAU,CAAC,EAAE,CAAC;EACtC,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAIC,KAAK,EAAK;IAC1BnB,QAAQ,CAACmB,KAAK,CAACN,GAAG,CAAC,GAAGM,KAAK;IAC3BH,eAAe,CAACI,KAAK,GAAGvB,kBAAkB,CAACC,EAAE,EAAEC,kBAAkB,EAAEC,QAAQ,CAAC;EAChF,CAAG;EACD,IAAMqB,WAAW,GAAG,SAAdA,WAAWA,CAAIR,GAAG,EAAK;IAC3B,OAAOb,QAAQ,CAACa,GAAG,CAAC;IACpBG,eAAe,CAACI,KAAK,GAAGJ,eAAe,CAACI,KAAK,CAAChB,MAAM,CAAC,UAACkB,SAAS;MAAA,OAAKA,SAAS,CAACT,GAAG,KAAKA,GAAG;IAAA,EAAC;EAC9F,CAAG;EACD,OAAO;IACLb,QAAQ,EAAEgB,eAAe;IACzBE,QAAQ,EAARA,QAAQ;IACRG,WAAW,EAAXA;EACJ,CAAG;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}