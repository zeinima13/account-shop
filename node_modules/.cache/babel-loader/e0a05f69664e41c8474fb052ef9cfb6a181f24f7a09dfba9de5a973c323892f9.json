{"ast":null,"code":"import _objectSpread from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.map.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { isVNode, render, createVNode } from 'vue';\nimport MessageBoxConstructor from './index.mjs';\nimport { isClient } from '@vueuse/core';\nimport { isString, isObject, hasOwn, isFunction } from '@vue/shared';\nimport { isUndefined, isElement } from '../../../utils/types.mjs';\nimport { debugWarn } from '../../../utils/error.mjs';\nvar messageInstance = /* @__PURE__ */new Map();\nvar getAppendToElement = function getAppendToElement(props) {\n  var appendTo = document.body;\n  if (props.appendTo) {\n    if (isString(props.appendTo)) {\n      appendTo = document.querySelector(props.appendTo);\n    }\n    if (isElement(props.appendTo)) {\n      appendTo = props.appendTo;\n    }\n    if (!isElement(appendTo)) {\n      debugWarn(\"ElMessageBox\", \"the appendTo option is not an HTMLElement. Falling back to document.body.\");\n      appendTo = document.body;\n    }\n  }\n  return appendTo;\n};\nvar initInstance = function initInstance(props, container) {\n  var appContext = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var vnode = createVNode(MessageBoxConstructor, props, isFunction(props.message) || isVNode(props.message) ? {\n    \"default\": isFunction(props.message) ? props.message : function () {\n      return props.message;\n    }\n  } : null);\n  vnode.appContext = appContext;\n  render(vnode, container);\n  getAppendToElement(props).appendChild(container.firstElementChild);\n  return vnode.component;\n};\nvar genContainer = function genContainer() {\n  return document.createElement(\"div\");\n};\nvar showMessage = function showMessage(options, appContext) {\n  var container = genContainer();\n  options.onVanish = function () {\n    render(null, container);\n    messageInstance[\"delete\"](vm);\n  };\n  options.onAction = function (action) {\n    var currentMsg = messageInstance.get(vm);\n    var resolve;\n    if (options.showInput) {\n      resolve = {\n        value: vm.inputValue,\n        action: action\n      };\n    } else {\n      resolve = action;\n    }\n    if (options.callback) {\n      options.callback(resolve, instance.proxy);\n    } else {\n      if (action === \"cancel\" || action === \"close\") {\n        if (options.distinguishCancelAndClose && action !== \"cancel\") {\n          currentMsg.reject(\"close\");\n        } else {\n          currentMsg.reject(\"cancel\");\n        }\n      } else {\n        currentMsg.resolve(resolve);\n      }\n    }\n  };\n  var instance = initInstance(options, container, appContext);\n  var vm = instance.proxy;\n  for (var prop in options) {\n    if (hasOwn(options, prop) && !hasOwn(vm.$props, prop)) {\n      vm[prop] = options[prop];\n    }\n  }\n  vm.visible = true;\n  return vm;\n};\nfunction MessageBox(options) {\n  var appContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n  if (!isClient) return Promise.reject();\n  var callback;\n  if (isString(options) || isVNode(options)) {\n    options = {\n      message: options\n    };\n  } else {\n    callback = options.callback;\n  }\n  return new Promise(function (resolve, reject) {\n    var vm = showMessage(options, appContext != null ? appContext : MessageBox._context);\n    messageInstance.set(vm, {\n      options: options,\n      callback: callback,\n      resolve: resolve,\n      reject: reject\n    });\n  });\n}\nvar MESSAGE_BOX_VARIANTS = [\"alert\", \"confirm\", \"prompt\"];\nvar MESSAGE_BOX_DEFAULT_OPTS = {\n  alert: {\n    closeOnPressEscape: false,\n    closeOnClickModal: false\n  },\n  confirm: {\n    showCancelButton: true\n  },\n  prompt: {\n    showCancelButton: true,\n    showInput: true\n  }\n};\nMESSAGE_BOX_VARIANTS.forEach(function (boxType) {\n  MessageBox[boxType] = messageBoxFactory(boxType);\n});\nfunction messageBoxFactory(boxType) {\n  return function (message, title, options, appContext) {\n    var titleOrOpts = \"\";\n    if (isObject(title)) {\n      options = title;\n      titleOrOpts = \"\";\n    } else if (isUndefined(title)) {\n      titleOrOpts = \"\";\n    } else {\n      titleOrOpts = title;\n    }\n    return MessageBox(Object.assign(_objectSpread({\n      title: titleOrOpts,\n      message: message,\n      type: \"\"\n    }, MESSAGE_BOX_DEFAULT_OPTS[boxType]), options, {\n      boxType: boxType\n    }), appContext);\n  };\n}\nMessageBox.close = function () {\n  messageInstance.forEach(function (_, vm) {\n    vm.doClose();\n  });\n  messageInstance.clear();\n};\nMessageBox._context = null;\nexport { MessageBox as default };","map":{"version":3,"names":["messageInstance","Map","getAppendToElement","props","appendTo","document","body","isString","querySelector","isElement","debugWarn","initInstance","container","appContext","arguments","length","undefined","vnode","createVNode","MessageBoxConstructor","isFunction","message","isVNode","render","appendChild","firstElementChild","component","genContainer","createElement","showMessage","options","onVanish","vm","onAction","action","currentMsg","get","resolve","showInput","value","inputValue","callback","instance","proxy","distinguishCancelAndClose","reject","prop","hasOwn","$props","visible","MessageBox","isClient","Promise","_context","set","MESSAGE_BOX_VARIANTS","MESSAGE_BOX_DEFAULT_OPTS","alert","closeOnPressEscape","closeOnClickModal","confirm","showCancelButton","prompt","forEach","boxType","messageBoxFactory","title","titleOrOpts","isObject","isUndefined","Object","assign","_objectSpread","type","close","_","doClose","clear"],"sources":["../../../../../../packages/components/message-box/src/messageBox.ts"],"sourcesContent":["import { createVNode, isVNode, render } from 'vue'\nimport {\n  debugWarn,\n  hasOwn,\n  isClient,\n  isElement,\n  isFunction,\n  isObject,\n  isString,\n  isUndefined,\n} from '@element-plus/utils'\nimport MessageBoxConstructor from './index.vue'\n\nimport type { AppContext, ComponentPublicInstance, VNode } from 'vue'\nimport type {\n  Action,\n  Callback,\n  ElMessageBoxOptions,\n  ElMessageBoxShortcutMethod,\n  IElMessageBox,\n  MessageBoxData,\n  MessageBoxState,\n} from './message-box.type'\n\n// component default merge props & data\n\nconst messageInstance = new Map<\n  ComponentPublicInstance<{ doClose: () => void }>, // marking doClose as function\n  {\n    options: any\n    callback: Callback | undefined\n    resolve: (res: any) => void\n    reject: (reason?: any) => void\n  }\n>()\n\nconst getAppendToElement = (props: any): HTMLElement => {\n  let appendTo: HTMLElement | null = document.body\n  if (props.appendTo) {\n    if (isString(props.appendTo)) {\n      appendTo = document.querySelector<HTMLElement>(props.appendTo)\n    }\n    if (isElement(props.appendTo)) {\n      appendTo = props.appendTo\n    }\n\n    // should fallback to default value with a warning\n    if (!isElement(appendTo)) {\n      debugWarn(\n        'ElMessageBox',\n        'the appendTo option is not an HTMLElement. Falling back to document.body.'\n      )\n      appendTo = document.body\n    }\n  }\n  return appendTo\n}\n\nconst initInstance = (\n  props: any,\n  container: HTMLElement,\n  appContext: AppContext | null = null\n) => {\n  const vnode = createVNode(\n    MessageBoxConstructor,\n    props,\n    isFunction(props.message) || isVNode(props.message)\n      ? {\n          default: isFunction(props.message)\n            ? props.message\n            : () => props.message,\n        }\n      : null\n  )\n  vnode.appContext = appContext\n  render(vnode, container)\n  getAppendToElement(props).appendChild(container.firstElementChild!)\n  return vnode.component\n}\n\nconst genContainer = () => {\n  return document.createElement('div')\n}\n\nconst showMessage = (options: any, appContext?: AppContext | null) => {\n  const container = genContainer()\n  // Adding destruct method.\n  // when transition leaves emitting `vanish` evt. so that we can do the clean job.\n  options.onVanish = () => {\n    // not sure if this causes mem leak, need proof to verify that.\n    // maybe calling out like 1000 msg-box then close them all.\n    render(null, container)\n    messageInstance.delete(vm) // Remove vm to avoid mem leak.\n    // here we were suppose to call document.body.removeChild(container.firstElementChild)\n    // but render(null, container) did that job for us. so that we do not call that directly\n  }\n\n  options.onAction = (action: Action) => {\n    const currentMsg = messageInstance.get(vm)!\n    let resolve: Action | { value: string; action: Action }\n    if (options.showInput) {\n      resolve = { value: vm.inputValue, action }\n    } else {\n      resolve = action\n    }\n    if (options.callback) {\n      options.callback(resolve, instance.proxy)\n    } else {\n      if (action === 'cancel' || action === 'close') {\n        if (options.distinguishCancelAndClose && action !== 'cancel') {\n          currentMsg.reject('close')\n        } else {\n          currentMsg.reject('cancel')\n        }\n      } else {\n        currentMsg.resolve(resolve)\n      }\n    }\n  }\n\n  const instance = initInstance(options, container, appContext)!\n\n  // This is how we use message box programmatically.\n  // Maybe consider releasing a template version?\n  // get component instance like v2.\n  const vm = instance.proxy as ComponentPublicInstance<\n    {\n      visible: boolean\n      doClose: () => void\n    } & MessageBoxState\n  >\n\n  for (const prop in options) {\n    if (hasOwn(options, prop) && !hasOwn(vm.$props, prop)) {\n      vm[prop as keyof ComponentPublicInstance] = options[prop]\n    }\n  }\n\n  // change visibility after everything is settled\n  vm.visible = true\n  return vm\n}\n\nasync function MessageBox(\n  options: ElMessageBoxOptions,\n  appContext?: AppContext | null\n): Promise<MessageBoxData>\nfunction MessageBox(\n  options: ElMessageBoxOptions | string | VNode,\n  appContext: AppContext | null = null\n): Promise<{ value: string; action: Action } | Action> {\n  if (!isClient) return Promise.reject()\n  let callback: Callback | undefined\n  if (isString(options) || isVNode(options)) {\n    options = {\n      message: options,\n    }\n  } else {\n    callback = options.callback\n  }\n\n  return new Promise((resolve, reject) => {\n    const vm = showMessage(\n      options,\n      appContext ?? (MessageBox as IElMessageBox)._context\n    )\n    // collect this vm in order to handle upcoming events.\n    messageInstance.set(vm, {\n      options,\n      callback,\n      resolve,\n      reject,\n    })\n  })\n}\n\nconst MESSAGE_BOX_VARIANTS = ['alert', 'confirm', 'prompt'] as const\nconst MESSAGE_BOX_DEFAULT_OPTS: Record<\n  typeof MESSAGE_BOX_VARIANTS[number],\n  Partial<ElMessageBoxOptions>\n> = {\n  alert: { closeOnPressEscape: false, closeOnClickModal: false },\n  confirm: { showCancelButton: true },\n  prompt: { showCancelButton: true, showInput: true },\n}\n\nMESSAGE_BOX_VARIANTS.forEach((boxType) => {\n  ;(MessageBox as IElMessageBox)[boxType] = messageBoxFactory(\n    boxType\n  ) as ElMessageBoxShortcutMethod\n})\n\nfunction messageBoxFactory(boxType: typeof MESSAGE_BOX_VARIANTS[number]) {\n  return (\n    message: string | VNode,\n    title: string | ElMessageBoxOptions,\n    options?: ElMessageBoxOptions,\n    appContext?: AppContext | null\n  ) => {\n    let titleOrOpts = ''\n    if (isObject(title)) {\n      options = title as ElMessageBoxOptions\n      titleOrOpts = ''\n    } else if (isUndefined(title)) {\n      titleOrOpts = ''\n    } else {\n      titleOrOpts = title as string\n    }\n\n    return MessageBox(\n      Object.assign(\n        {\n          title: titleOrOpts,\n          message,\n          type: '',\n          ...MESSAGE_BOX_DEFAULT_OPTS[boxType],\n        },\n        options,\n        {\n          boxType,\n        }\n      ),\n      appContext\n    )\n  }\n}\n\nMessageBox.close = () => {\n  // instance.setupInstall.doClose()\n  // instance.setupInstall.state.visible = false\n\n  messageInstance.forEach((_, vm) => {\n    vm.doClose()\n  })\n\n  messageInstance.clear()\n}\n;(MessageBox as IElMessageBox)._context = null\n\nexport default MessageBox as IElMessageBox\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}