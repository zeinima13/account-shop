{"ast":null,"code":"import _objectSpread from \"C:/Users/ASUS/CascadeProjects/account-shop/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.index-of.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.number.is-finite.js\";\nimport \"core-js/modules/es.number.is-nan.js\";\nimport \"core-js/modules/es.number.parse-float.js\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport { defineComponent, ref, reactive, computed, watch, onMounted, onUpdated, openBlock, createElementBlock, normalizeClass, unref, withModifiers, withDirectives, withKeys, renderSlot, createVNode, withCtx, createBlock, createCommentVNode, createSlots } from 'vue';\nimport { isNil } from 'lodash-unified';\nimport { ElInput } from '../../input/index.mjs';\nimport { ElIcon } from '../../icon/index.mjs';\nimport { ArrowDown, Minus, ArrowUp, Plus } from '@element-plus/icons-vue';\nimport { inputNumberProps, inputNumberEmits } from './input-number.mjs';\nimport _export_sfc from '../../../_virtual/plugin-vue_export-helper.mjs';\nimport { vRepeatClick } from '../../../directives/repeat-click/index.mjs';\nimport { useLocale } from '../../../hooks/use-locale/index.mjs';\nimport { useNamespace } from '../../../hooks/use-namespace/index.mjs';\nimport { useFormItem } from '../../form/src/hooks/use-form-item.mjs';\nimport { isNumber, isUndefined } from '../../../utils/types.mjs';\nimport { debugWarn, throwError } from '../../../utils/error.mjs';\nimport { useFormSize, useFormDisabled } from '../../form/src/hooks/use-form-common-props.mjs';\nimport { UPDATE_MODEL_EVENT, INPUT_EVENT, CHANGE_EVENT } from '../../../constants/event.mjs';\nimport { isString } from '@vue/shared';\nimport { isFirefox } from '../../../utils/browser.mjs';\nvar __default__ = defineComponent({\n  name: \"ElInputNumber\"\n});\nvar _sfc_main = /* @__PURE__ */defineComponent(_objectSpread(_objectSpread({}, __default__), {}, {\n  props: inputNumberProps,\n  emits: inputNumberEmits,\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    var props = __props;\n    var _useLocale = useLocale(),\n      t = _useLocale.t;\n    var ns = useNamespace(\"input-number\");\n    var input = ref();\n    var data = reactive({\n      currentValue: props.modelValue,\n      userInput: null\n    });\n    var _useFormItem = useFormItem(),\n      formItem = _useFormItem.formItem;\n    var minDisabled = computed(function () {\n      return isNumber(props.modelValue) && props.modelValue <= props.min;\n    });\n    var maxDisabled = computed(function () {\n      return isNumber(props.modelValue) && props.modelValue >= props.max;\n    });\n    var numPrecision = computed(function () {\n      var stepPrecision = getPrecision(props.step);\n      if (!isUndefined(props.precision)) {\n        if (stepPrecision > props.precision) {\n          debugWarn(\"InputNumber\", \"precision should not be less than the decimal places of step\");\n        }\n        return props.precision;\n      } else {\n        return Math.max(getPrecision(props.modelValue), stepPrecision);\n      }\n    });\n    var controlsAtRight = computed(function () {\n      return props.controls && props.controlsPosition === \"right\";\n    });\n    var inputNumberSize = useFormSize();\n    var inputNumberDisabled = useFormDisabled();\n    var displayValue = computed(function () {\n      if (data.userInput !== null) {\n        return data.userInput;\n      }\n      var currentValue = data.currentValue;\n      if (isNil(currentValue)) return \"\";\n      if (isNumber(currentValue)) {\n        if (Number.isNaN(currentValue)) return \"\";\n        if (!isUndefined(props.precision)) {\n          currentValue = currentValue.toFixed(props.precision);\n        }\n      }\n      return currentValue;\n    });\n    var toPrecision = function toPrecision(num, pre) {\n      if (isUndefined(pre)) pre = numPrecision.value;\n      if (pre === 0) return Math.round(num);\n      var snum = String(num);\n      var pointPos = snum.indexOf(\".\");\n      if (pointPos === -1) return num;\n      var nums = snum.replace(\".\", \"\").split(\"\");\n      var datum = nums[pointPos + pre];\n      if (!datum) return num;\n      var length = snum.length;\n      if (snum.charAt(length - 1) === \"5\") {\n        snum = \"\".concat(snum.slice(0, Math.max(0, length - 1)), \"6\");\n      }\n      return Number.parseFloat(Number(snum).toFixed(pre));\n    };\n    var getPrecision = function getPrecision(value) {\n      if (isNil(value)) return 0;\n      var valueString = value.toString();\n      var dotPosition = valueString.indexOf(\".\");\n      var precision = 0;\n      if (dotPosition !== -1) {\n        precision = valueString.length - dotPosition - 1;\n      }\n      return precision;\n    };\n    var ensurePrecision = function ensurePrecision(val) {\n      var coefficient = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      if (!isNumber(val)) return data.currentValue;\n      return toPrecision(val + props.step * coefficient);\n    };\n    var increase = function increase() {\n      if (props.readonly || inputNumberDisabled.value || maxDisabled.value) return;\n      var value = Number(displayValue.value) || 0;\n      var newVal = ensurePrecision(value);\n      setCurrentValue(newVal);\n      emit(INPUT_EVENT, data.currentValue);\n      setCurrentValueToModelValue();\n    };\n    var decrease = function decrease() {\n      if (props.readonly || inputNumberDisabled.value || minDisabled.value) return;\n      var value = Number(displayValue.value) || 0;\n      var newVal = ensurePrecision(value, -1);\n      setCurrentValue(newVal);\n      emit(INPUT_EVENT, data.currentValue);\n      setCurrentValueToModelValue();\n    };\n    var verifyValue = function verifyValue(value, update) {\n      var max = props.max,\n        min = props.min,\n        step = props.step,\n        precision = props.precision,\n        stepStrictly = props.stepStrictly,\n        valueOnClear = props.valueOnClear;\n      if (max < min) {\n        throwError(\"InputNumber\", \"min should not be greater than max.\");\n      }\n      var newVal = Number(value);\n      if (isNil(value) || Number.isNaN(newVal)) {\n        return null;\n      }\n      if (value === \"\") {\n        if (valueOnClear === null) {\n          return null;\n        }\n        newVal = isString(valueOnClear) ? {\n          min: min,\n          max: max\n        }[valueOnClear] : valueOnClear;\n      }\n      if (stepStrictly) {\n        newVal = toPrecision(Math.round(newVal / step) * step, precision);\n        if (newVal !== value) {\n          update && emit(UPDATE_MODEL_EVENT, newVal);\n        }\n      }\n      if (!isUndefined(precision)) {\n        newVal = toPrecision(newVal, precision);\n      }\n      if (newVal > max || newVal < min) {\n        newVal = newVal > max ? max : min;\n        update && emit(UPDATE_MODEL_EVENT, newVal);\n      }\n      return newVal;\n    };\n    var setCurrentValue = function setCurrentValue(value) {\n      var emitChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var _a;\n      var oldVal = data.currentValue;\n      var newVal = verifyValue(value);\n      if (!emitChange) {\n        emit(UPDATE_MODEL_EVENT, newVal);\n        return;\n      }\n      if (oldVal === newVal && value) return;\n      data.userInput = null;\n      emit(UPDATE_MODEL_EVENT, newVal);\n      if (oldVal !== newVal) {\n        emit(CHANGE_EVENT, newVal, oldVal);\n      }\n      if (props.validateEvent) {\n        (_a = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _a.call(formItem, \"change\")[\"catch\"](function (err) {\n          return debugWarn(err);\n        });\n      }\n      data.currentValue = newVal;\n    };\n    var handleInput = function handleInput(value) {\n      data.userInput = value;\n      var newVal = value === \"\" ? null : Number(value);\n      emit(INPUT_EVENT, newVal);\n      setCurrentValue(newVal, false);\n    };\n    var handleInputChange = function handleInputChange(value) {\n      var newVal = value !== \"\" ? Number(value) : \"\";\n      if (isNumber(newVal) && !Number.isNaN(newVal) || value === \"\") {\n        setCurrentValue(newVal);\n      }\n      setCurrentValueToModelValue();\n      data.userInput = null;\n    };\n    var focus = function focus() {\n      var _a, _b;\n      (_b = (_a = input.value) == null ? void 0 : _a.focus) == null ? void 0 : _b.call(_a);\n    };\n    var blur = function blur() {\n      var _a, _b;\n      (_b = (_a = input.value) == null ? void 0 : _a.blur) == null ? void 0 : _b.call(_a);\n    };\n    var handleFocus = function handleFocus(event) {\n      emit(\"focus\", event);\n    };\n    var handleBlur = function handleBlur(event) {\n      var _a, _b;\n      data.userInput = null;\n      if (isFirefox() && data.currentValue === null && ((_a = input.value) == null ? void 0 : _a.input)) {\n        input.value.input.value = \"\";\n      }\n      emit(\"blur\", event);\n      if (props.validateEvent) {\n        (_b = formItem == null ? void 0 : formItem.validate) == null ? void 0 : _b.call(formItem, \"blur\")[\"catch\"](function (err) {\n          return debugWarn(err);\n        });\n      }\n    };\n    var setCurrentValueToModelValue = function setCurrentValueToModelValue() {\n      if (data.currentValue !== props.modelValue) {\n        data.currentValue = props.modelValue;\n      }\n    };\n    var handleWheel = function handleWheel(e) {\n      if (document.activeElement === e.target) e.preventDefault();\n    };\n    watch(function () {\n      return props.modelValue;\n    }, function (value, oldValue) {\n      var newValue = verifyValue(value, true);\n      if (data.userInput === null && newValue !== oldValue) {\n        data.currentValue = newValue;\n      }\n    }, {\n      immediate: true\n    });\n    onMounted(function () {\n      var _a;\n      var min = props.min,\n        max = props.max,\n        modelValue = props.modelValue;\n      var innerInput = (_a = input.value) == null ? void 0 : _a.input;\n      innerInput.setAttribute(\"role\", \"spinbutton\");\n      if (Number.isFinite(max)) {\n        innerInput.setAttribute(\"aria-valuemax\", String(max));\n      } else {\n        innerInput.removeAttribute(\"aria-valuemax\");\n      }\n      if (Number.isFinite(min)) {\n        innerInput.setAttribute(\"aria-valuemin\", String(min));\n      } else {\n        innerInput.removeAttribute(\"aria-valuemin\");\n      }\n      innerInput.setAttribute(\"aria-valuenow\", data.currentValue || data.currentValue === 0 ? String(data.currentValue) : \"\");\n      innerInput.setAttribute(\"aria-disabled\", String(inputNumberDisabled.value));\n      if (!isNumber(modelValue) && modelValue != null) {\n        var val = Number(modelValue);\n        if (Number.isNaN(val)) {\n          val = null;\n        }\n        emit(UPDATE_MODEL_EVENT, val);\n      }\n      innerInput.addEventListener(\"wheel\", handleWheel, {\n        passive: false\n      });\n    });\n    onUpdated(function () {\n      var _a, _b;\n      var innerInput = (_a = input.value) == null ? void 0 : _a.input;\n      innerInput == null ? void 0 : innerInput.setAttribute(\"aria-valuenow\", \"\".concat((_b = data.currentValue) != null ? _b : \"\"));\n    });\n    expose({\n      focus: focus,\n      blur: blur\n    });\n    return function (_ctx, _cache) {\n      return openBlock(), createElementBlock(\"div\", {\n        \"class\": normalizeClass([unref(ns).b(), unref(ns).m(unref(inputNumberSize)), unref(ns).is(\"disabled\", unref(inputNumberDisabled)), unref(ns).is(\"without-controls\", !_ctx.controls), unref(ns).is(\"controls-right\", unref(controlsAtRight))]),\n        onDragstart: withModifiers(function () {}, [\"prevent\"])\n      }, [_ctx.controls ? withDirectives((openBlock(), createElementBlock(\"span\", {\n        key: 0,\n        role: \"button\",\n        \"aria-label\": unref(t)(\"el.inputNumber.decrease\"),\n        \"class\": normalizeClass([unref(ns).e(\"decrease\"), unref(ns).is(\"disabled\", unref(minDisabled))]),\n        onKeydown: withKeys(decrease, [\"enter\"])\n      }, [renderSlot(_ctx.$slots, \"decrease-icon\", {}, function () {\n        return [createVNode(unref(ElIcon), null, {\n          \"default\": withCtx(function () {\n            return [unref(controlsAtRight) ? (openBlock(), createBlock(unref(ArrowDown), {\n              key: 0\n            })) : (openBlock(), createBlock(unref(Minus), {\n              key: 1\n            }))];\n          }),\n          _: 1\n        })];\n      })], 42, [\"aria-label\", \"onKeydown\"])), [[unref(vRepeatClick), decrease]]) : createCommentVNode(\"v-if\", true), _ctx.controls ? withDirectives((openBlock(), createElementBlock(\"span\", {\n        key: 1,\n        role: \"button\",\n        \"aria-label\": unref(t)(\"el.inputNumber.increase\"),\n        \"class\": normalizeClass([unref(ns).e(\"increase\"), unref(ns).is(\"disabled\", unref(maxDisabled))]),\n        onKeydown: withKeys(increase, [\"enter\"])\n      }, [renderSlot(_ctx.$slots, \"increase-icon\", {}, function () {\n        return [createVNode(unref(ElIcon), null, {\n          \"default\": withCtx(function () {\n            return [unref(controlsAtRight) ? (openBlock(), createBlock(unref(ArrowUp), {\n              key: 0\n            })) : (openBlock(), createBlock(unref(Plus), {\n              key: 1\n            }))];\n          }),\n          _: 1\n        })];\n      })], 42, [\"aria-label\", \"onKeydown\"])), [[unref(vRepeatClick), increase]]) : createCommentVNode(\"v-if\", true), createVNode(unref(ElInput), {\n        id: _ctx.id,\n        ref_key: \"input\",\n        ref: input,\n        type: \"number\",\n        step: _ctx.step,\n        \"model-value\": unref(displayValue),\n        placeholder: _ctx.placeholder,\n        readonly: _ctx.readonly,\n        disabled: unref(inputNumberDisabled),\n        size: unref(inputNumberSize),\n        max: _ctx.max,\n        min: _ctx.min,\n        name: _ctx.name,\n        \"aria-label\": _ctx.ariaLabel,\n        \"validate-event\": false,\n        onKeydown: [withKeys(withModifiers(increase, [\"prevent\"]), [\"up\"]), withKeys(withModifiers(decrease, [\"prevent\"]), [\"down\"])],\n        onBlur: handleBlur,\n        onFocus: handleFocus,\n        onInput: handleInput,\n        onChange: handleInputChange\n      }, createSlots({\n        _: 2\n      }, [_ctx.$slots.prefix ? {\n        name: \"prefix\",\n        fn: withCtx(function () {\n          return [renderSlot(_ctx.$slots, \"prefix\")];\n        })\n      } : void 0, _ctx.$slots.suffix ? {\n        name: \"suffix\",\n        fn: withCtx(function () {\n          return [renderSlot(_ctx.$slots, \"suffix\")];\n        })\n      } : void 0]), 1032, [\"id\", \"step\", \"model-value\", \"placeholder\", \"readonly\", \"disabled\", \"size\", \"max\", \"min\", \"name\", \"aria-label\", \"onKeydown\"])], 42, [\"onDragstart\"]);\n    };\n  }\n}));\nvar InputNumber = /* @__PURE__ */_export_sfc(_sfc_main, [[\"__file\", \"input-number.vue\"]]);\nexport { InputNumber as default };","map":{"version":3,"names":["name","_useLocale","useLocale","t","ns","useNamespace","input","ref","data","reactive","currentValue","props","modelValue","userInput","_useFormItem","useFormItem","formItem","minDisabled","computed","isNumber","min","maxDisabled","max","numPrecision","stepPrecision","getPrecision","step","isUndefined","precision","debugWarn","Math","controlsAtRight","controls","controlsPosition","inputNumberSize","useFormSize","inputNumberDisabled","useFormDisabled","displayValue","isNil","Number","isNaN","toFixed","toPrecision","num","pre","value","round","snum","String","pointPos","indexOf","nums","replace","split","datum","length","charAt","concat","slice","parseFloat","valueString","toString","dotPosition","ensurePrecision","val","coefficient","arguments","undefined","increase","readonly","newVal","setCurrentValue","emit","INPUT_EVENT","setCurrentValueToModelValue","decrease","verifyValue","update","stepStrictly","valueOnClear","throwError","isString","UPDATE_MODEL_EVENT","emitChange","_a","oldVal","CHANGE_EVENT","validateEvent","validate","call","err","handleInput","handleInputChange","focus","_b","blur","handleFocus","event","handleBlur","isFirefox","handleWheel","e","document","activeElement","target","preventDefault","watch","oldValue","newValue","immediate","onMounted","innerInput","setAttribute","isFinite","removeAttribute","addEventListener","passive","onUpdated","expose"],"sources":["../../../../../../packages/components/input-number/src/input-number.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[\n      ns.b(),\n      ns.m(inputNumberSize),\n      ns.is('disabled', inputNumberDisabled),\n      ns.is('without-controls', !controls),\n      ns.is('controls-right', controlsAtRight),\n    ]\"\n    @dragstart.prevent\n  >\n    <span\n      v-if=\"controls\"\n      v-repeat-click=\"decrease\"\n      role=\"button\"\n      :aria-label=\"t('el.inputNumber.decrease')\"\n      :class=\"[ns.e('decrease'), ns.is('disabled', minDisabled)]\"\n      @keydown.enter=\"decrease\"\n    >\n      <slot name=\"decrease-icon\">\n        <el-icon>\n          <arrow-down v-if=\"controlsAtRight\" />\n          <minus v-else />\n        </el-icon>\n      </slot>\n    </span>\n    <span\n      v-if=\"controls\"\n      v-repeat-click=\"increase\"\n      role=\"button\"\n      :aria-label=\"t('el.inputNumber.increase')\"\n      :class=\"[ns.e('increase'), ns.is('disabled', maxDisabled)]\"\n      @keydown.enter=\"increase\"\n    >\n      <slot name=\"increase-icon\">\n        <el-icon>\n          <arrow-up v-if=\"controlsAtRight\" />\n          <plus v-else />\n        </el-icon>\n      </slot>\n    </span>\n    <el-input\n      :id=\"id\"\n      ref=\"input\"\n      type=\"number\"\n      :step=\"step\"\n      :model-value=\"displayValue\"\n      :placeholder=\"placeholder\"\n      :readonly=\"readonly\"\n      :disabled=\"inputNumberDisabled\"\n      :size=\"inputNumberSize\"\n      :max=\"max\"\n      :min=\"min\"\n      :name=\"name\"\n      :aria-label=\"ariaLabel\"\n      :validate-event=\"false\"\n      @keydown.up.prevent=\"increase\"\n      @keydown.down.prevent=\"decrease\"\n      @blur=\"handleBlur\"\n      @focus=\"handleFocus\"\n      @input=\"handleInput\"\n      @change=\"handleInputChange\"\n    >\n      <template v-if=\"$slots.prefix\" #prefix>\n        <slot name=\"prefix\" />\n      </template>\n      <template v-if=\"$slots.suffix\" #suffix>\n        <slot name=\"suffix\" />\n      </template>\n    </el-input>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { computed, onMounted, onUpdated, reactive, ref, watch } from 'vue'\nimport { isNil } from 'lodash-unified'\nimport { ElInput } from '@element-plus/components/input'\nimport { ElIcon } from '@element-plus/components/icon'\nimport {\n  useFormDisabled,\n  useFormItem,\n  useFormSize,\n} from '@element-plus/components/form'\nimport { vRepeatClick } from '@element-plus/directives'\nimport { useLocale, useNamespace } from '@element-plus/hooks'\nimport {\n  debugWarn,\n  isFirefox,\n  isNumber,\n  isString,\n  isUndefined,\n  throwError,\n} from '@element-plus/utils'\nimport { ArrowDown, ArrowUp, Minus, Plus } from '@element-plus/icons-vue'\nimport {\n  CHANGE_EVENT,\n  INPUT_EVENT,\n  UPDATE_MODEL_EVENT,\n} from '@element-plus/constants'\nimport { inputNumberEmits, inputNumberProps } from './input-number'\n\nimport type { InputInstance } from '@element-plus/components/input'\n\ndefineOptions({\n  name: 'ElInputNumber',\n})\n\nconst props = defineProps(inputNumberProps)\nconst emit = defineEmits(inputNumberEmits)\n\nconst { t } = useLocale()\nconst ns = useNamespace('input-number')\nconst input = ref<InputInstance>()\n\ninterface Data {\n  currentValue: number | null | undefined\n  userInput: null | number | string\n}\nconst data = reactive<Data>({\n  currentValue: props.modelValue,\n  userInput: null,\n})\n\nconst { formItem } = useFormItem()\n\nconst minDisabled = computed(\n  () => isNumber(props.modelValue) && props.modelValue <= props.min\n)\nconst maxDisabled = computed(\n  () => isNumber(props.modelValue) && props.modelValue >= props.max\n)\n\nconst numPrecision = computed(() => {\n  const stepPrecision = getPrecision(props.step)\n  if (!isUndefined(props.precision)) {\n    if (stepPrecision > props.precision) {\n      debugWarn(\n        'InputNumber',\n        'precision should not be less than the decimal places of step'\n      )\n    }\n    return props.precision\n  } else {\n    return Math.max(getPrecision(props.modelValue), stepPrecision)\n  }\n})\nconst controlsAtRight = computed(() => {\n  return props.controls && props.controlsPosition === 'right'\n})\n\nconst inputNumberSize = useFormSize()\nconst inputNumberDisabled = useFormDisabled()\n\nconst displayValue = computed(() => {\n  if (data.userInput !== null) {\n    return data.userInput\n  }\n  let currentValue: number | string | undefined | null = data.currentValue\n  if (isNil(currentValue)) return ''\n  if (isNumber(currentValue)) {\n    if (Number.isNaN(currentValue)) return ''\n    if (!isUndefined(props.precision)) {\n      currentValue = currentValue.toFixed(props.precision)\n    }\n  }\n  return currentValue\n})\nconst toPrecision = (num: number, pre?: number) => {\n  if (isUndefined(pre)) pre = numPrecision.value\n  if (pre === 0) return Math.round(num)\n  let snum = String(num)\n  const pointPos = snum.indexOf('.')\n  if (pointPos === -1) return num\n  const nums = snum.replace('.', '').split('')\n  const datum = nums[pointPos + pre]\n  if (!datum) return num\n  const length = snum.length\n  if (snum.charAt(length - 1) === '5') {\n    snum = `${snum.slice(0, Math.max(0, length - 1))}6`\n  }\n  return Number.parseFloat(Number(snum).toFixed(pre))\n}\nconst getPrecision = (value: number | null | undefined) => {\n  if (isNil(value)) return 0\n  const valueString = value.toString()\n  const dotPosition = valueString.indexOf('.')\n  let precision = 0\n  if (dotPosition !== -1) {\n    precision = valueString.length - dotPosition - 1\n  }\n  return precision\n}\nconst ensurePrecision = (val: number, coefficient: 1 | -1 = 1) => {\n  if (!isNumber(val)) return data.currentValue\n  // Solve the accuracy problem of JS decimal calculation by converting the value to integer.\n  return toPrecision(val + props.step * coefficient)\n}\nconst increase = () => {\n  if (props.readonly || inputNumberDisabled.value || maxDisabled.value) return\n  const value = Number(displayValue.value) || 0\n  const newVal = ensurePrecision(value)\n  setCurrentValue(newVal)\n  emit(INPUT_EVENT, data.currentValue)\n  setCurrentValueToModelValue()\n}\nconst decrease = () => {\n  if (props.readonly || inputNumberDisabled.value || minDisabled.value) return\n  const value = Number(displayValue.value) || 0\n  const newVal = ensurePrecision(value, -1)\n  setCurrentValue(newVal)\n  emit(INPUT_EVENT, data.currentValue)\n  setCurrentValueToModelValue()\n}\nconst verifyValue = (\n  value: number | string | null | undefined,\n  update?: boolean\n): number | null | undefined => {\n  const { max, min, step, precision, stepStrictly, valueOnClear } = props\n  if (max < min) {\n    throwError('InputNumber', 'min should not be greater than max.')\n  }\n  let newVal = Number(value)\n  if (isNil(value) || Number.isNaN(newVal)) {\n    return null\n  }\n  if (value === '') {\n    if (valueOnClear === null) {\n      return null\n    }\n    newVal = isString(valueOnClear) ? { min, max }[valueOnClear] : valueOnClear\n  }\n  if (stepStrictly) {\n    newVal = toPrecision(Math.round(newVal / step) * step, precision)\n    if (newVal !== value) {\n      update && emit(UPDATE_MODEL_EVENT, newVal)\n    }\n  }\n  if (!isUndefined(precision)) {\n    newVal = toPrecision(newVal, precision)\n  }\n  if (newVal > max || newVal < min) {\n    newVal = newVal > max ? max : min\n    update && emit(UPDATE_MODEL_EVENT, newVal)\n  }\n  return newVal\n}\nconst setCurrentValue = (\n  value: number | string | null | undefined,\n  emitChange = true\n) => {\n  const oldVal = data.currentValue\n  const newVal = verifyValue(value)\n  if (!emitChange) {\n    emit(UPDATE_MODEL_EVENT, newVal!)\n    return\n  }\n  if (oldVal === newVal && value) return\n  data.userInput = null\n  emit(UPDATE_MODEL_EVENT, newVal!)\n  if (oldVal !== newVal) {\n    emit(CHANGE_EVENT, newVal!, oldVal!)\n  }\n  if (props.validateEvent) {\n    formItem?.validate?.('change').catch((err) => debugWarn(err))\n  }\n  data.currentValue = newVal\n}\nconst handleInput = (value: string) => {\n  data.userInput = value\n  const newVal = value === '' ? null : Number(value)\n  emit(INPUT_EVENT, newVal)\n  setCurrentValue(newVal, false)\n}\nconst handleInputChange = (value: string) => {\n  const newVal = value !== '' ? Number(value) : ''\n  if ((isNumber(newVal) && !Number.isNaN(newVal)) || value === '') {\n    setCurrentValue(newVal)\n  }\n  setCurrentValueToModelValue()\n  data.userInput = null\n}\n\nconst focus = () => {\n  input.value?.focus?.()\n}\n\nconst blur = () => {\n  input.value?.blur?.()\n}\n\nconst handleFocus = (event: MouseEvent | FocusEvent) => {\n  emit('focus', event)\n}\n\nconst handleBlur = (event: MouseEvent | FocusEvent) => {\n  data.userInput = null\n  // This is a Firefox-specific problem. When non-numeric content is entered into a numeric input box,\n  // the content displayed on the page is not cleared after the value is cleared. #18533\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1398528\n  if (isFirefox() && data.currentValue === null && input.value?.input) {\n    input.value.input.value = ''\n  }\n  emit('blur', event)\n  if (props.validateEvent) {\n    formItem?.validate?.('blur').catch((err) => debugWarn(err))\n  }\n}\n\nconst setCurrentValueToModelValue = () => {\n  if (data.currentValue !== props.modelValue) {\n    data.currentValue = props.modelValue\n  }\n}\nconst handleWheel = (e: WheelEvent) => {\n  if (document.activeElement === e.target) e.preventDefault()\n}\n\nwatch(\n  () => props.modelValue,\n  (value, oldValue) => {\n    const newValue = verifyValue(value, true)\n    if (data.userInput === null && newValue !== oldValue) {\n      data.currentValue = newValue\n    }\n  },\n  { immediate: true }\n)\nonMounted(() => {\n  const { min, max, modelValue } = props\n  const innerInput = input.value?.input as HTMLInputElement\n  innerInput.setAttribute('role', 'spinbutton')\n  if (Number.isFinite(max)) {\n    innerInput.setAttribute('aria-valuemax', String(max))\n  } else {\n    innerInput.removeAttribute('aria-valuemax')\n  }\n  if (Number.isFinite(min)) {\n    innerInput.setAttribute('aria-valuemin', String(min))\n  } else {\n    innerInput.removeAttribute('aria-valuemin')\n  }\n  innerInput.setAttribute(\n    'aria-valuenow',\n    data.currentValue || data.currentValue === 0\n      ? String(data.currentValue)\n      : ''\n  )\n  innerInput.setAttribute('aria-disabled', String(inputNumberDisabled.value))\n  if (!isNumber(modelValue) && modelValue != null) {\n    let val: number | null = Number(modelValue)\n    if (Number.isNaN(val)) {\n      val = null\n    }\n    emit(UPDATE_MODEL_EVENT, val!)\n  }\n  innerInput.addEventListener('wheel', handleWheel, { passive: false })\n})\nonUpdated(() => {\n  const innerInput = input.value?.input\n  innerInput?.setAttribute('aria-valuenow', `${data.currentValue ?? ''}`)\n})\ndefineExpose({\n  /** @description get focus the input component */\n  focus,\n  /** @description remove focus the input component */\n  blur,\n})\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}